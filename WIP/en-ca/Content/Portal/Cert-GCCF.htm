<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-ca" xml:lang="en-ca" class="_Skins_HTML5___Top_Navigation_Coronado" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Developers corner|[%=System.LinkedTitle%]|Certificates">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>GCCF certificates</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/select-language.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.remove-highlight-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/highlight.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/sanitize-html.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../A_Welcome pages/StartHere.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search our help and documentation" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="search-container">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="row collapse">
                                        <div class="top-bar">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="select language" />
                                                    </button>
                                                    <button class="button needs-pie print-button" title="Print">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                    </button>
                                                    <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                    </button>
                                                    <button class="button needs-pie next-topic-button" title="Navigate next">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                    </button>
                                                    <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="remove highlight" />
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div> </div>
                                        <div class="topic-layout">
                                            <div>
                                                <div class="side-menu">
                                                    <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/Release_2_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                                <div class="side-content">
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadside-content"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Search Tips</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Search is based on keyword.</p>
                                                            <p><samp>Ex:&#160;"Procedures"</samp>
                                                            </p>
                                                            <p>Do not search with natural language</p>
                                                            <p><samp>Ex:&#160;"How do I write a new procedure?"</samp>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div><a class="cta" href="https://technet.microsoft.com/en-us/library/mt812330.aspx"><div class="cta center"><p>Dynamics 365 Help
									</p></div></a>
                                            </div>
                                            <div>
                                                <h1><a name="aanchor18"></a>
                                                    <MadCap:concept term="Portal" />GCCF certificates</h1>
                                                <p>Connecting to the GCCF infrastructure requires specific certificates.</p>
                                                <ul>
                                                    <li value="1">The certificates must be device certificates, issued by the Government of Canada Internal Credential Management service. ICM certificates are obtained from SSC. Commercial certificates, such as Entrust SSL certificates, are not acceptable.<ul><li value="1">The SSC ECM group can supply the proper form to request these certificates.<br /></li><li value="2">For production: the certificate request is submitted and signed by a departmental Local Registration Authority (LRA).</li><li value="3">For development: a request is sent directly to SSC’s ECM group. No LRA involvement is required.<br /></li></ul></li>
                                                    <li value="2">An encryption certificate and a signing certificate are required. These will have the same subject name, and are issued as a pair.<br /></li>
                                                    <li style="list-style-type: disc;" value="3">The certificate must be issues under the Government of Canada 1CA-AC1 root certificate.<br /></li>
                                                    <li style="list-style-type: disc;" value="4">The certificates must be within their validity period.<br /></li>
                                                    <li style="list-style-type: disc;" value="5">The certificates must not be revoked.<br /></li>
                                                    <li style="list-style-type: disc;" value="6">The certificates must have been supplied to GCCF in the form of a metadata package generated for the portal. Tools to generate the metadata package are included with the <code>GC.GCCF</code> solution. The metadata package is submitted to the SSC ECM group.<br /></li>
                                                    <li style="list-style-type: disc;" value="7">Before being used by the portal, the certificates should be processed using OpenSSL to rebind their Cryptographic Service Provider (CSP). See technical notes.<br /></li>
                                                    <li style="list-style-type: disc;" value="8">The certificates must be loaded into the Windows Local Machine Personal certificate store.<br /></li>
                                                    <li style="list-style-type: disc;" value="9">The ADFS service account must have “read” permissions for the certificate private keys.</li>
                                                </ul>
                                                <h2 class="Heading2">Security</h2>
                                                <p>To ensure the security of a department’s portal, it is essential that the private keys of the GCCF certificates are protected. <b>Anyone who has access to the GCCF certificate private keys can impersonate the department’s portal.</b></p>
                                                <ul>
                                                    <li value="1">Access to the GCCF certificates must be restricted to trusted personnel.</li>
                                                    <li style="list-style-type: disc;" value="2">The GCCF certificates must be stored in a location which is access-controlled. They should not be kept on a public drive share, for example.</li>
                                                </ul>
                                                <p>No special precautions need be taken for copies of the GCCF certificates which only include the public keys. These are not security sensitive. For example—the GCCF signing certificate exported for use in SharePoint contains only the public key.</p>
                                                <h2 class="Heading2">ICM Certificates and Entrust</h2>
                                                <p>ICM certificates are distributed via Entrust, similar to MyKey certificates.</p>
                                                <ul>
                                                    <li value="1">For production, any PC with an ICM production Entrust profile will be able to retrieve the certificates. Most government desktop PCs which have Entrust installed will fall into this category.<br /></li>
                                                    <li style="list-style-type: disc;" value="2">For development, a PC will require an ICM CATE Entrust profile to retrieve the certificates. PCs using a production profile will not be able to retrieve pre-production CATE certificates. </li>
                                                </ul>
                                                <h2 class="Heading2">Retrieving GCCF certificates via Entrust</h2>
                                                <ol>
                                                    <li value="1">Retrieve the certificates using the request and authorization codes from ICM. Use the regular desktop Entrust client, <b>Enrol for Entrust Digital ID…</b> from the tray icon.<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/Certificates - SSL Certificate/Overview_2.jpg" data-mc-popup-alt="Machine generated alternative text:&#xA;ate Evlorer &#xA;CMifieMe "><img class="MCPopupThumbnail img" data-mc-width="221" data-mc-height="172" src="../Resources/Images/Certificates - SSL Certificate/Overview_2_thumb_0_48.jpg" style="visibility: visible;mso-wrap-style: square;mc-thumbnail: popup;" alt="Machine generated alternative text:&#xA;ate Evlorer &#xA;CMifieMe " tabindex="" /></a><br /></p></li>
                                                    <li value="2">Open the EPF file using the Entrust Certificate Explorer with the correct password.<br /><b>Entrust Certificate Explorer</b> from the Entrust tray icon.<p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/Certificates - SSL Certificate/Overview_2_1.jpg" data-mc-popup-alt="Machine generated alternative text:&#xA;Options„ . &#xA;Enroll for Entrust Digital ID.„ &#xA;Recover Entrust Digital ID.„ &#xA;Ill;entrUQCetificate &#xA;Email Certificates "><img class="MCPopupThumbnail img" data-mc-width="255" data-mc-height="178" src="../Resources/Images/Certificates - SSL Certificate/Overview_2_1_thumb_0_48.jpg" style="visibility: visible;mso-wrap-style: square;mc-thumbnail: popup;" alt="Machine generated alternative text:&#xA;Options„ . &#xA;Enroll for Entrust Digital ID.„ &#xA;Recover Entrust Digital ID.„ &#xA;Ill;entrUQCetificate &#xA;Email Certificates " tabindex="" /></a><br /></p></li>
                                                    <li value="3">Look for the <b>GCCF</b> entries in the user's certificate store.<br />There will be two certificates. The type of certificate type can be verified on the <b>Details</b> tab of the certificate window. <br /><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/Certificates - SSL Certificate/Overview_2_2.jpg" data-mc-popup-alt="Machine generated alternative text:&#xA;Entrust Certificate Explorer &#xA;File Edit Help &#xA;Personal &#xA;Truste d &#xA;Other People &#xA;Personal Encryption Groups &#xA;Search Reu Its &#xA;Name &#xA;ICA.ACI &#xA;GCCFdirect-dev &#xA;a White Phillip &#xA;QWhite Phillip &#xA;Email &#xA;phil p.wh • &#xA;Issued by &#xA;ICA-ACI &#xA;'CA-ACI &#xA;'CA-ACI &#xA;Expiration Date &#xA;2019,'W11 &#xA;2019/09/11 &#xA;2019,'12/15 &#xA;2019,'12.'16 &#xA;Intended Purp. „ &#xA;Friendly Name &#xA;direct-dev AC.„ &#xA;White Phillip'.„ &#xA;Status "><img class="MCPopupThumbnail img imgthumbnail" data-mc-width="829" data-mc-height="208" src="../Resources/Images/Certificates - SSL Certificate/Overview_2_2_thumb_0_48.jpg" alt="Machine generated alternative text:&#xA;Entrust Certificate Explorer &#xA;File Edit Help &#xA;Personal &#xA;Truste d &#xA;Other People &#xA;Personal Encryption Groups &#xA;Search Reu Its &#xA;Name &#xA;ICA.ACI &#xA;GCCFdirect-dev &#xA;a White Phillip &#xA;QWhite Phillip &#xA;Email &#xA;phil p.wh • &#xA;Issued by &#xA;ICA-ACI &#xA;'CA-ACI &#xA;'CA-ACI &#xA;Expiration Date &#xA;2019,'W11 &#xA;2019/09/11 &#xA;2019,'12/15 &#xA;2019,'12.'16 &#xA;Intended Purp. „ &#xA;Friendly Name &#xA;direct-dev AC.„ &#xA;White Phillip'.„ &#xA;Status " tabindex="" /></a></li>
                                                    <li value="4">Look for the <b>Key Usage</b> field. <br />A signing certificate (<b>Digital Signature</b>)<br /><p><img src="../Resources/Images/Certificates - SSL Certificate/Overview_2.png" style="visibility: visible;mso-wrap-style: square;mc-thumbnail: none;" alt="Machine generated alternative text:&#xA;I IPublic key&#xA;I Crfifirf PrJiric&#xA;Key Usage Dgit Sgna?e (80)&#xA;RSA (2048 5its)&#xA;rl1(-rhrt PnIir,PnIir, Trš" /><br />An Encryption certificate ("Key Enchipherment")<br /></p><p><img src="../Resources/Images/Certificates - SSL Certificate/Overview_2_1.png" style="visibility: visible;mso-wrap-style: square;mc-thumbnail: none;" alt="Machine generated alternative text:&#xA;IF Key Usage&#xA;Key Encipherment (20)&#xA;—" /></p></li>
                                                    <li value="5">Using Entrust Certificate Explorer, export each certificate into a .pfx file.<br />Export only one certificate into each file.<br />e.g.:<code><br />GCCFdirectdev_sig.pfx<br />GCCFdirectdev_enc.pfx</code></li>
                                                </ol>
                                                <p>Notes:</p>
                                                <ul>
                                                    <li value="1"> You must include the private key</li>
                                                    <li value="2">You must mark the private key as exportable</li>
                                                    <li value="3">You must specify a password on the export</li>
                                                </ul>
                                                <h2 class="Heading2">Rebind CSP for Certificates</h2>
                                                <p>Before the certificates can be used, the Cryptographic Service Provider must be changed.</p>
                                                <ol>
                                                    <li value="1">Install a copy of OpenSSL for Windows on a developer PC. <br />OpenSSL packages can be found here <a href="https://slproweb.com/products/Win32OpenSSL.html"><span class="Hyperlink">https://slproweb.com/products/Win32OpenSSL.html</span></a><br /></li>
                                                    <li value="2">Open a Windows command shell.<br /></li>
                                                    <li value="3">Use Open SSL to rebind the CSP of each certificate.</li>
                                                </ol>
                                                <p><code>C:\OpenSSL-Win32\bin\openssl.exe pkcs12 -in GCCFdirectdev_enc.pfx -passin pass:&lt;password&gt; -out GCCFdirectdev_enc.pem -passout pass:&lt;password&gt;</code>
                                                </p>
                                                <p><code>C:\OpenSSL-Win32\bin\openssl.exe pkcs12 -export -in GCCFdirectdev_enc.pem -passin pass:&lt;password&gt; -out GCCFdirectdev_enc.p12 -passout pass:&lt;password&gt; -CSP "Microsoft Enhanced RSA and AES Cryptographic Provider"</code>
                                                </p>
                                                <p><code>C:\OpenSSL-Win32\bin\openssl.exe pkcs12 -in GCCFdirectdev_sig.pfx -passin pass:&lt;password&gt; -out GCCFdirectdev_signing.pem -passout pass:&lt;password&gt;</code>
                                                </p>
                                                <p><code>C:\OpenSSL-Win32\bin\openssl.exe pkcs12 -export -in GCCFdirectdev_signing.pem -passin pass:&lt;password&gt; -out GCCFdirectdev_signing.p12 -passout pass:&lt;password&gt; -CSP "Microsoft Enhanced RSA and AES Cryptographic Provider"</code>
                                                </p>
                                                <h2 class="Heading2">Load Certificates into the Local Machine Personal Store</h2>
                                                <p>This step needs to be performed on the ADFS server, so that ADFS can access the certificates. You will be prompted for the certificate password.</p>
                                                <p><code>certutil.exe -importpfx GCCFdirectdev_signing.p12</code>
                                                </p>
                                                <p><code>certutil.exe -importpfx GCCFdirectdev_enc.p12</code>
                                                </p>
                                                <h2 class="Heading2">Retrieve the GCCF Certificates from the Local Machine Personal Store</h2>
                                                <p>PowerShell commands to find the certificates. The encryption certificate will be stored in variable <code>$enc</code>. The signing certificate will be in <code>$sig</code>. Note that the search string for <b>Subject</b> must match the certificate’s subject string.</p>
                                                <p><code>$encNew = Get-ChildItem&#160; Cert:\LocalMachine\My | Where-Object { $_.Subject -like '*GCCFdirect-dev*' -and ($_.Extensions | Where-Object { $_.KeyUsages -eq "KeyEncipherment" }) }</code>
                                                </p>
                                                <p><code>$sigNew = Get-ChildItem&#160; Cert:\LocalMachine\My | Where-Object { $_.Subject -like '* GCCFdirect-dev*' -and ($_.Extensions | Where-Object { $_.KeyUsages -eq "DigitalSignature" }) }</code>
                                                </p>
                                                <p><code>@( $enc, $sig ) | ft -auto @{Name="KeyUsages"; Ex={ ($_.Extensions | Where-Object { $_.KeyUsages -eq "KeyEncipherment" -or $_.KeyUsages -eq "DigitalSignature" }).KeyUsages.ToString() }}, @{Name="CN"; Ex={$_.Subject.Replace("CN=", "").Split(',')[0]}}, Thumbprint</code>
                                                </p>
                                                <h2 class="Heading2">Certificate Permissions</h2>
                                                <p>The ADFS service account must have “read” access to the private key of both the Encryption and Signing certificates. </p>
                                                <ul>
                                                    <li value="1">The script <code>Configure-AdfsCertificatePermissions.ps1</code> included in the GCCF project can set the required certificate permissions. Note that the script will require an up-to-date <code>&lt;environment&gt;.config.xml </code>file with the correct certificate subject and ADFS service account name.<br /></li>
                                                    <li style="list-style-type: disc;" value="2">Alternately, the following PowerShell commands will set required certificate permissions. They use the <code>$enc </code>and <code>$sig </code>variables from the previous section. Replace <code>DOMAIN\ADFS_ACCOUNT</code> with the ADFS service account.</li>
                                                </ul>
                                                <p><code>$privateKeyContainer = $enc.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName</code>
                                                </p>
                                                <p><code>$keyPath = "C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\$privateKeyContainer"</code>
                                                </p>
                                                <p><code>$acl = Get-Acl -Path $keyPat</code>h</p>
                                                <p><code>$acl.AddAccessRule($accessRule)</code>
                                                </p>
                                                <p><code>$permission = "NT SERVICE\adfssrv","Read","Allow"</code>
                                                </p>
                                                <p><code>$accessRule = new-object System.Security.AccessControl.FileSystemAccessRule $permission</code>
                                                </p>
                                                <p><code>$acl.AddAccessRule($accessRule)</code>
                                                </p>
                                                <p><code>$permission = "DOMAIN\ADFS_ACCOUNT","Read","Allow"</code>
                                                </p>
                                                <p><code>$accessRule = new-object System.Security.AccessControl.FileSystemAccessRule $permission</code>
                                                </p>
                                                <p><code>$acl.AddAccessRule($accessRule)</code>
                                                </p>
                                                <p><code>Set-Acl $keyPath $acl</code>
                                                </p>
                                                <p><code>$privateKeyContainer = $sig.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName</code>
                                                </p>
                                                <p><code>$keyPath = "C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\$privateKeyContainer"</code>
                                                </p>
                                                <p><code>$acl = Get-Acl -Path $keyPath</code>
                                                </p>
                                                <p><code>$acl.AddAccessRule($accessRule)</code>
                                                </p>
                                                <p><code>$permission = "NT SERVICE\adfssrv","Read","Allow"</code>
                                                </p>
                                                <p><code>$accessRule = new-object </code>
                                                </p>
                                                <p><code>System.Security.AccessControl.FileSystemAccessRule $permission</code>
                                                </p>
                                                <p><code>$acl.AddAccessRule($accessRule)</code>
                                                </p>
                                                <p><code>$permission = "DOMAIN\ADFS_ACCOUNT ","Read","Allow"</code>
                                                </p>
                                                <p><code>$accessRule = new-object System.Security.AccessControl.FileSystemAccessRule $permission</code>
                                                </p>
                                                <p><code>$acl.AddAccessRule($accessRule)</code>
                                                </p>
                                                <p><code>Set-Acl $keyPath $acl</code>
                                                </p>
                                                <p><a class="MCHelpControl MCHelpControl-Concept conceptLink" data-mc-concepts="Portal" href="javascript:void(0);" data-mc-topics="About GCCF|GCCFAbout.htm#aanchor166||About the portal|AboutPortal.htm#aanchor395||About the portal|AboutPortal.htm#aanchor396||ADFS extensions web application|ADFSExtensionswebApp.htm#aanchor217||Alphinat SmartGuide documentation|SmartGuide/AlphinatDoc.htm#aanchor44||Authentication for GCCF users|GCCFAuthentication.htm#aanchor22||Authentication for RDA users|AuthenticationRDA.htm#aanchor214||Build and deploy SPFx apps|SPFxAppsBuildDeploy.htm#aanchor140||Configure forms for the portal|SmartGuide/ConfigureApplic on portal.htm#aanchor442||Create new forms|SmartGuide/CreateNewForms.htm#aanchor242||Data transfer from the portal to GCPM|DataTransfer.htm#aanchor256||Deploying forms for the portal with SmartGuide|SmartGuide/PortalFormDeploy.htm#aanchor0||Developing forms for the portal with SmartGuide|SmartGuide/PortalFormDev.htm#aanchor203||Developing portal forms - connections|SmartGuide/PortalFormDevConnections.htm#aanchor106||Developing SPFx Web Parts|SPFxAppsProjectFolders.htm#aanchor145||Documents on the portal |PortalDocs.htm#aanchor422||Dynamic portal forms|SmartGuide/PortalFormDynamic.htm#aanchor394||EGCS.Portal configuration|EGCSPortalConfig.htm#aanchor368||EGCS.Portal Visual Studio Solution|VSSolutionEGCSPortal.htm#aanchor321||FormManager web service overview|WebServicePortalFormMgr.htm#aanchor10||FormManager web service|WebServiceFormMgr.htm#aanchor127||GC.GCCF configuration|GCCFConfig.htm#aanchor388||GC.GCCF Visual Studio Solution|VSSolutionGCCF.htm#aanchor428||GCCF certificates|#aanchor18||GCCF common domain web application|GCCFCommonDomainWebApp.htm#aanchor320||GCCF database|GCCFDatabase.htm#aanchor205||GCCF metadata|GCCFMetadata.htm#aanchor267||GCPM authentication|GCPMAuthentication.htm#aanchor8||GCPM&#160;Smartlet Structure |SmartGuide/PortalFormSmartletStructure.htm#aanchor213||Invite a GC&#160;Client to the portal|UsingPortal/InviteClient.htm#aanchor191||Navigate the portal|UsingPortal/NavigatePortal.htm#aanchor144||Portal - master page overview|PortalMasterPage.htm#aanchor25||Portal branding|PortalBranding.htm#aanchor261||Portal configuration - invitation email|PortalConfigInviteEmail.htm#aanchor227||Portal document integration with GCPM&#160;|PortalDocIntegGCPM.htm#aanchor231||Portal entity relationship diagram|../Modules/ERDs/ERD Portal.htm#aanchor131||Portal integration with GCPM|Portal-GCPMIntegration.htm#aanchor2||Portal release notes 1.0|PortalReleaseNotes1.0.htm#aanchor38||Portal security|PortalSecurity.htm#aanchor263||RDA web service and portal web service certificates|Cert-RDAWebService.htm#aanchor215||RDA web service|WebServiceRDA.htm#aanchor123||Reverse proxy server for the portal|PortalReverseProxy.htm#aanchor212||SharePoint - portal site structure|PortalSharepointSiteStructure.htm#aanchor156||SharePoint web service|WebserviceSharePoint.htm#aanchor313||SPFx apps for the portal|SPFxAppsPortal.htm#aanchor208||SSL certificate|Cert-SSL.htm#aanchor310||Submit forms on the portal|UsingPortal/SubmitForms.htm#aanchor357||Submit tabular data with a form|UsingPortal/SubmitFormTable.htm#aanchor162||Web services for portal integration|WebServicesPortal.htm#aanchor238||WebAPI&#160;web service|WebServiceWebAPI.htm#aanchor362||Windows service - document management|WindowsDocMgt.htm#aanchor184||Windows service - site creation|WindowsSiteCreation.htm#aanchor255"><span class="MCHelpControl-ConceptHotSpot_"><img class="MCHelpControl_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Concept Link Icon" />See Also</span></a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>