<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-ca" xml:lang="en-ca" class="_Skins_HTML5___Top_Navigation_Coronado" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Developers corner|[%=System.LinkedTitle%]|Portal applications and services">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Portal web service </title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/select-language.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.remove-highlight-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/highlight.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../Resources/TableStyles/PatternedRows.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/sanitize-html.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../A_Welcome pages/StartHere.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search our help and documentation" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="search-container">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="row collapse">
                                        <div class="top-bar">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="select language" />
                                                    </button>
                                                    <button class="button needs-pie print-button" title="Print">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                    </button>
                                                    <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                    </button>
                                                    <button class="button needs-pie next-topic-button" title="Navigate next">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                    </button>
                                                    <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="remove highlight" />
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div> </div>
                                        <div class="topic-layout">
                                            <div>
                                                <div class="side-menu">
                                                    <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/Release_2_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                                <div class="side-content">
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadside-content"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Search Tips</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Search is based on keyword.</p>
                                                            <p><samp>Ex:&#160;"Procedures"</samp>
                                                            </p>
                                                            <p>Do not search with natural language</p>
                                                            <p><samp>Ex:&#160;"How do I write a new procedure?"</samp>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div><a class="cta" href="https://technet.microsoft.com/en-us/library/mt812330.aspx"><div class="cta center"><p>Dynamics 365 Help
									</p></div></a>
                                            </div>
                                            <div>
                                                <h1>Portal web service </h1>
                                                <p>The portal web service is the communications channel from the RDA to the portal. The portal web service is found in the Visual Studio project <code>EGCS.Portal.WebService.Portal</code>. The portal web service:</p>
                                                <ul>
                                                    <li value="1">Is a certificate-authenticated WCF web service.</li>
                                                    <li value="2">Uses the server-side SharePoint object model to query and update the portal. </li>
                                                    <li style="list-style-type: disc;" value="3">Must be hosted on a server that belongs to the portal’s SharePoint farm.</li>
                                                    <li value="4">The RDA communicates with the Portal web service via HTTP (not HTTPS). Internally all messages are encrypted and signed, so communications are secure and authenticated.</li>
                                                    <li value="5">
                                                        <p>The WebAPI web service is the component at the RDA which communicates with the Portal web service. The GCPM CRM server never communicates with the Portal web service directly. CRM calls the WebAPI web service, which then calls the Portal web service.</p>
                                                    </li>
                                                </ul>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Web services</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <table style="margin-left: 0;margin-right: auto;width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" style="width: 248px;" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <thead>
                                                                <tr class="TableStyle-PatternedRows-Head-Header1">
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Class</th>
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Web service</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Parameters</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Returns</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">
                                                                        <p class="tabletext">Details</p>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows" rowspan="3">
                                                                        <p class="tabletext">Account.svc web service – Class Account.cs</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext"><code>AccountRegisterWithPortal&#160;</code>&#160;&#160;&#160;&#160;&#160;&#160;&#160; </p>
                                                                        <p>&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext"><code>string egcs_AccountNumber,</code> </p>
                                                                        <p class="tabletext"><code>string requestedBy</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p>&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Notifies the portal that a new Client Zone has been requested.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>PortalUrlGet</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p><code>string egcs_AccountNumber</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>string</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">Retrieves the URL for a Client Zone, or null if no Client Zone exists on the portal.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyD-Regular-LightRows">&#160;</th>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">FCProfile.svc web service – Class FCProfile.cs</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>PortalUrlGet</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>string egcs_FCProfileID</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>string</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">Retrieves the URL for a Project Zone, or null if no Project Zone exists on the portal.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td rowspan="4" class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;<p class="tabletext">PortalUser.svc web service – Class PortalUser.cs</p></td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext"><code>PortalUrlGet</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext"><code>Guid portalUserId</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext"><code>string</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Retrieves the URL for a Personal Zone, or null if no Personal Zone exists on the portal.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>RecoverRequestList</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p>&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>List&lt;RecoverAccountRequest</code>&gt;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">Retrieve a list of PortalUser account which have requested recovery (moving the account to a new GCKey or SecureKey)</p>
                                                                        <p class="tabletext">Not currently implemented in GCPM</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p><code>RecoverRequestCancel</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p><code>int GccfPaiRecoverId</code>,</p>
                                                                        <p><code>string&#160;ServiceRequestId</code>,</p>
                                                                        <p><code>string&#160;Comment</code>,</p>
                                                                        <p><code>string&#160;ProcessedBy</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p>&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Cancel the recovery of a PortalUser account.</p>
                                                                        <p class="tabletext">Not currently implemented in GCPM</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p><code>RecoverRequestRecover</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p><code>int GccfPaiRecoverId</code>,</p>
                                                                        <p><code>string ServiceRequestId</code>,</p>
                                                                        <p><code>string Comment</code>,</p>
                                                                        <p><code>string ProcessedBy</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p>&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">Complete the recovery of a PortalUser account. Transfer the associated portal user to a new PAI (move the GCCF User to a new GCKey or SecureKey)</p>
                                                                        <p class="tabletext">Not currently implemented in GCPM</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">&#160;</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext">TwoFactorAuthentication.svc web service – Class TwoFactorAuthentication.cs</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>RetryClearAll</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p>&#160;</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>Guid PortalUserId</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyA-Regular-DarkerRows">
                                                                        <p class="tabletext">Reset the two-factor authentication status of a PortalUser. Used to clear a lockout on the user’s account if they have exhausted all of their two-factor authentication retry attempts.</p>
                                                                        <p class="tabletext">Not currently implemented in GCPM</p>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Web.config settings</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>Settings which must be configured per-installation.</p>
                                                        <table style="mc-table-style: url('../Resources/TableStyles/PatternedRows.css');margin-left: 0;margin-right: auto;width: 100%;" class="TableStyle-PatternedRows" cellspacing="0">
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <thead>
                                                                <tr class="TableStyle-PatternedRows-Head-Header1">
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Setting</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">
                                                                        <p class="tabletext">Notes</p>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext"><code>RootCAThumbprint</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Thumbprint of the root CA certificate which client certificates must belong to.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>ClientThumbprint</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">A list of thumbprints for client certificates authorized to call the Portal web service.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-LightRows">
                                                                        <p class="tabletext"><code>serviceCertificate</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyA-Regular-LightRows">
                                                                        <p class="tabletext">Must reference the Portal web service’s server certificate.</p>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <h2>Prerequisites</h2>
                                                <p>For the example below, assume the Portal web service is installed as <code>http://web-service-portal.dept-dept.gc.ca</code></p>
                                                <ul>
                                                    <li value="1">
                                                        <p>A build of the <code>GC.GCCF</code> and <code>EGCS.Portal</code> solutions, which is assumed to be available in a directory <code>_Build</code>.</p>
                                                    </li>
                                                    <li value="2">
                                                        <p>An <code>EGCS.Portal</code> configuration file. (link to <code>EGCSPortalConfig.htm</code>).&#160;See <a href="EGCSPortalConfig.htm" class="MCXref xref">EGCS.Portal configuration</a>. </p>
                                                    </li>
                                                    <li value="3">
                                                        <p>A <code>gccf.config</code> configuration file. (link to <code>GCCFConfig.htm</code>). See <a href="GCCFConfig.htm" class="MCXref xref">GC.GCCF configuration</a>. </p>
                                                    </li>
                                                    <li value="4">
                                                        <p>Choose a server to host the Portal web service. This server must be a member of the SharePoint farm for the portal. The Portal web service will be installed as a new IIS web application.</p>
                                                    </li>
                                                    <li value="5">
                                                        <p>Choose a HOST name which will be used by the <code>WebAPI</code> web service to access the Portal web service.</p>
                                                    </li>
                                                    <li value="6">
                                                        <p>HOST name for this example: <code>web-service-portal.dept-dept.gc.ca</code></p>
                                                    </li>
                                                    <li value="7">
                                                        <p>Choose a port for the Portal web service. Connections to the Portal web service use HTTP, however, all messages are encrypted so that connections are secure despite using HTTP.  The default port is 80.</p>
                                                    </li>
                                                    <li value="8">
                                                        <p>Ensure that the server hosting the WebAPI web service can resolve the HOST name as the correct network address for the Portal web service. This can be accomplished by DNS, or by modifying the <code>C:\Windows\System32\drivers\etc\hosts</code> file on the <code>WebAPI</code> server.</p>
                                                    </li>
                                                    <li value="9">
                                                        <p>Example: The <code>WebAPI</code> web service must be able to resolve <code>web-service-portal.dept-dept.gc.ca</code>.</p>
                                                    </li>
                                                    <li value="10">
                                                        <p>Ensure that firewall rules are in place to permit the <code>WebAPI</code> to make connections to the Portal web service. The <code>WebAPI</code> web service must be able to make connections to <code><a href="http://web-service-portal.dept-dept.gc.ca:%3cport%3e/">http://web-service-portal.dept-dept.gc.ca:&lt;port&gt;/</a></code> through any intervening networks and firewalls.</p>
                                                    </li>
                                                    <li value="11">
                                                        <p>The Portal web service should be configured to use the same service account as used by SharePoint for the Portal web application. This is not the SharePoint farm account, this should be the web application service account (assuming the Portal is installed following Microsoft best practices for accounts).</p>
                                                    </li>
                                                    <li value="12">
                                                        <p>The Portal web service requires a certificate to authenticate itself to callers. See RDA web service and portal web service certificates. See <a href="Cert-RDAWebService.htm" class="MCXref xref">RDA web service and portal web service certificates</a>. </p>
                                                        <p>The Portal web service should have a certificate with a client and server profile, and a subject name which matches the HOST name chosen above.</p>
                                                        <p>Example subject name: <code>web-service-portal.dept-dept.gc.ca</code></p>
                                                        <p>The certificate must include a private key.</p>
                                                        <p>The certificate should be installed in the Local Computer, Personal certificate store on all SharePoint servers.</p>
                                                        <p><code>certutil.exe -importpfx web-service-portal.dept-dept.gc.ca.pfx</code>
                                                        </p>
                                                    </li>
                                                    <li value="13">
                                                        <p>The <code>EGCS.Portal</code> configuration file should be updated with the thumbprint of the Portal’s certificate. This setting will cause the Portal to present the Portal web service certificate as the client certificate for connections to the RDA web service.</p>
                                                        <p><code>&lt;Token&gt; -&gt; RDAWebServiceClientThumbprint</code>
                                                        </p>
                                                    </li>
                                                    <li value="14">
                                                        <p>The service account must have read access to the certificate private key.</p>
                                                    </li>
                                                    <li value="15">
                                                        <p>Launch <code>mmc.exe</code>, add the “<b>Certificates</b>” snap-in for the local computer. Locate the certificate in the “<b>Personal</b>” store.</p>
                                                        <p>Right-click on the certificate and select <b>All tasks &gt; Manage Private Keys...</b></p>
                                                        <p>Ensure the SharePoint service account has “<b>Read</b>” access.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../Resources/Images/Portal/PrivateKey.png"><img class="MCPopupThumbnail img" data-mc-width="624" data-mc-height="190" src="../Resources/Images/Portal/PrivateKey_thumb_0_48.png" tabindex="" /></a></p>
                                                    </li>
                                                    <li value="16">
                                                        <p>•	The CA certificate which issued the Portal web service certificate should be registered in Trusted Root Certification Authorities. This certificate should not have a private key.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../Resources/Images/Portal/NotPrivateKey.png"><img class="MCPopupThumbnail img" data-mc-width="624" data-mc-height="149" src="../Resources/Images/Portal/NotPrivateKey_thumb_0_48.png" tabindex="" /></a></p>
                                                    </li>
                                                    <li value="17">
                                                        <p>•	The <code>EGCS.Portal</code> configuration file should be updated with the thumbprint of the CA certificate.</p>
                                                        <p><code>&lt;Token&gt; -&gt; RDAWebServiceRootCAThumbprint</code>
                                                        </p>
                                                    </li>
                                                </ul>
                                                <h2>Installation</h2>
                                                <ol>
                                                    <li value="1">If it has not been created, a web application should be provisioned in IIS to host the portal web service.<br /><ul><li value="1">Provision the web application at <code>C:\inetpub\wwwroot-webservice-http</code></li><li value="2">Use an HTTP binding (not HTTPS).</li><li value="3"><p>It should be bound to the port selected in the prerequisites.</p></li><li value="4"><p>It is suggested to configure the host name on the binding. The name must match the HOST name selected in prerequisites.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../Resources/Images/Portal/EditSiteBinding.png"><img class="MCPopupThumbnail img" data-mc-width="394" data-mc-height="178" src="../Resources/Images/Portal/EditSiteBinding_thumb_0_48.png" tabindex="" /></a></p></li><li value="5">Assign an application pool with the desired service account to run the application.<br /></li><li value="6">Create a folder for the Portal web service<br /><code>C:\inetpub\wwwroot-webservice-http\EGCS.Portal.WebService.Portal</code></li><li value="7"><p>Convert the Portal web service folder into an IIS application.</p><p>Assign an application pool with the desired service account to run the application.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../Resources/Images/Portal/ConvertApp.png"><img class="MCPopupThumbnail img" data-mc-width="445" data-mc-height="413" src="../Resources/Images/Portal/ConvertApp_thumb_0_48.png" tabindex="" /></a></p></li></ul></li>
                                                    <li value="2">Install the portal web service<br /><code>.\_Build\Scripts\Install-EGCS.Portal.WebService.SharePoint.ps1 –Config</code> <br /><code>.\_Build\Config\&lt;environment&gt;.egcs.config</code><br /><br />This command will install web application files to path:<br /><code>C:\inetpub\wwwroot-webservice-http\ EGCS.Portal.WebService.Portal</code></li>
                                                    <li value="3">Install <code>EGCS.Portal</code> configuration (<code>egcs.config</code>)<br /><p><code>.\_Build\Scripts\Install-Egcs_Config.ps1 .\_Build\Config\&lt;portal name&gt;.egcs.config</code><br />The portal web service will automatically be restarted.</p></li>
                                                    <li value="4">Install <code>gccf.config</code> configuration<p><code>.\_Build\Scripts\Install-GCCF_Config.ps1</code><br />The portal web service will automatically be restarted.</p></li>
                                                    <li value="5">
                                                        <p>Edit <code>web.config</code> settings for the Portal web service.<br /><code>&lt;serviceCertificate&gt;</code> should be updated with the thumbprint of the certificate issued to the Portal web service in the prerequisites.</p>
                                                        <p>Other settings<br /></p>
                                                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                                                            <col class="TableStyle-PatternedRows-Column-Regular" style="width: 201px;" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <thead>
                                                                <tr class="TableStyle-PatternedRows-Head-Header1">
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Setting</th>
                                                                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Description</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows"><code>ClientThumbprint</code>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">A list (one or more) of thumbprints of certificates authorized to call the Portal web service. By default, this should be a single certificate issued to the WebAPI web service. In a development scenario, there may be additional thumbprints for developer certificates to call the Portal web service.</td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext"><code>RootCAThumbprint</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyA-Regular-DarkerRows">Thumbprint of the root CA certificate which issued the Portal web service certificate, and the Portal web service client certificate(s).</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </li>
                                                </ol>
                                                <p><a class="MCHelpControl MCHelpControl-Concept conceptLink" data-mc-concepts="Portal" href="javascript:void(0);" data-mc-topics="About GCCF|GCCFAbout.htm#aanchor166||About the portal|AboutPortal.htm#aanchor395||About the portal|AboutPortal.htm#aanchor396||ADFS extensions web application|ADFSExtensionswebApp.htm#aanchor217||Alphinat SmartGuide documentation|SmartGuide/AlphinatDoc.htm#aanchor44||Authentication for GCCF users|GCCFAuthentication.htm#aanchor22||Authentication for RDA users|AuthenticationRDA.htm#aanchor214||Build and deploy SPFx apps|SPFxAppsBuildDeploy.htm#aanchor140||Configure forms for the portal|SmartGuide/ConfigureApplic on portal.htm#aanchor442||Create new forms|SmartGuide/CreateNewForms.htm#aanchor242||Data transfer from the portal to GCPM|DataTransfer.htm#aanchor256||Deploying forms for the portal with SmartGuide|SmartGuide/PortalFormDeploy.htm#aanchor0||Developing forms for the portal with SmartGuide|SmartGuide/PortalFormDev.htm#aanchor203||Developing portal forms - connections|SmartGuide/PortalFormDevConnections.htm#aanchor106||Developing SPFx Web Parts|SPFxAppsProjectFolders.htm#aanchor145||Documents on the portal |PortalDocs.htm#aanchor422||Dynamic portal forms|SmartGuide/PortalFormDynamic.htm#aanchor394||EGCS.Portal configuration|EGCSPortalConfig.htm#aanchor368||EGCS.Portal Visual Studio Solution|VSSolutionEGCSPortal.htm#aanchor321||FormManager web service overview|WebServicePortalFormMgr.htm#aanchor10||FormManager web service|WebServiceFormMgr.htm#aanchor127||GC.GCCF configuration|GCCFConfig.htm#aanchor388||GC.GCCF Visual Studio Solution|VSSolutionGCCF.htm#aanchor428||GCCF certificates|Cert-GCCF.htm#aanchor18||GCCF common domain web application|GCCFCommonDomainWebApp.htm#aanchor320||GCCF database|GCCFDatabase.htm#aanchor205||GCCF metadata|GCCFMetadata.htm#aanchor267||GCPM authentication|GCPMAuthentication.htm#aanchor8||GCPM&#160;Smartlet Structure |SmartGuide/PortalFormSmartletStructure.htm#aanchor213||Invite a GC&#160;Client to the portal|UsingPortal/InviteClient.htm#aanchor191||Navigate the portal|UsingPortal/NavigatePortal.htm#aanchor144||Portal - master page overview|PortalMasterPage.htm#aanchor25||Portal branding|PortalBranding.htm#aanchor261||Portal configuration - invitation email|PortalConfigInviteEmail.htm#aanchor227||Portal document integration with GCPM&#160;|PortalDocIntegGCPM.htm#aanchor231||Portal entity relationship diagram|../Modules/ERDs/ERD Portal.htm#aanchor131||Portal integration with GCPM|Portal-GCPMIntegration.htm#aanchor2||Portal release notes 1.0|PortalReleaseNotes1.0.htm#aanchor38||Portal security|PortalSecurity.htm#aanchor263||RDA web service and portal web service certificates|Cert-RDAWebService.htm#aanchor215||RDA web service|WebServiceRDA.htm#aanchor123||Reverse proxy server for the portal|PortalReverseProxy.htm#aanchor212||SharePoint - portal site structure|PortalSharepointSiteStructure.htm#aanchor156||SharePoint web service|WebserviceSharePoint.htm#aanchor313||SPFx apps for the portal|SPFxAppsPortal.htm#aanchor208||SSL certificate|Cert-SSL.htm#aanchor310||Submit forms on the portal|UsingPortal/SubmitForms.htm#aanchor357||Submit tabular data with a form|UsingPortal/SubmitFormTable.htm#aanchor162||Web services for portal integration|WebServicesPortal.htm#aanchor238||WebAPI&#160;web service|WebServiceWebAPI.htm#aanchor362||Windows service - document management|WindowsDocMgt.htm#aanchor184||Windows service - site creation|WindowsSiteCreation.htm#aanchor255"><span class="MCHelpControl-ConceptHotSpot_"><img class="MCHelpControl_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Concept Link Icon" />See Also</span></a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>