<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-ca" xml:lang="en-ca" class="_Skins_HTML5___Top_Navigation_Coronado" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Developers corner|[%=System.LinkedTitle%]|Portal applications and services">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>WebAPI&#160;web service</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/select-language.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.remove-highlight-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/highlight.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../Resources/TableStyles/PatternedRows.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/sanitize-html.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../A_Welcome pages/StartHere.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search our help and documentation" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="search-container">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="row collapse">
                                        <div class="top-bar">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Change language">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="select language" />
                                                    </button>
                                                    <button class="button needs-pie print-button" title="Print">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                    </button>
                                                    <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                    </button>
                                                    <button class="button needs-pie next-topic-button" title="Navigate next">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                    </button>
                                                    <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="remove highlight" />
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div> </div>
                                        <div class="topic-layout">
                                            <div>
                                                <div class="side-menu">
                                                    <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/Release_2_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                                <div class="side-content">
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadside-content"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Search Tips</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Search is based on keyword.</p>
                                                            <p><samp>Ex:&#160;"Procedures"</samp>
                                                            </p>
                                                            <p>Do not search with natural language</p>
                                                            <p><samp>Ex:&#160;"How do I write a new procedure?"</samp>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div><a class="cta" href="https://technet.microsoft.com/en-us/library/mt812330.aspx"><div class="cta center"><p>Dynamics 365 Help
									</p></div></a>
                                            </div>
                                            <div>
                                                <h1><a name="aanchor362"></a>
                                                    <MadCap:concept term="Portal" />WebAPI&#160;web service</h1>
                                                <p>The WebAPI web service is the communication channel from GCPM to the portal. The WebAPI web service is found in the Visual Studio project <code>EGCS.Portal.WebService.WebAPI</code>.</p>
                                                <ul>
                                                    <li value="1">An ASP.NET Web API 2, anonymous, REST service. </li>
                                                    <li style="list-style-type: disc;" value="2">Any communication from GCPM to the portal uses this web service.</li>
                                                    <li value="3">
                                                        <p>The WebAPI web service calls methods in the Portal web service to communicate with the Portal.</p>
                                                    </li>
                                                    <li value="4">
                                                        <p>Connections from GCPM to the <code>WebAPI</code> web service use transport-layer encryption (HTTPS)</p>
                                                    </li>
                                                    <li value="5">
                                                        <p>Connections from the <code>WebAPI</code> web service to the Portal web service use HTTP. However, all messages sent to the Portal web service are encrypted and signed, so communications are secure and authenticated.</p>
                                                    </li>
                                                </ul>
                                                <p>The WebAPI Web Service is likely hosted “close” to the CRM instance for GCPM (e.g. in the same data centre, or virtual infrastructure, if possible).</p>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Endpoints</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <table style="margin-left: 0;margin-right: auto;width: 100%;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                                                            <col class="TableStyle-PatternedRows-Column-Regular" style="width: 174px;" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" style="width: 149px;" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <thead>
                                                                <tr class="TableStyle-PatternedRows-Head-Header1">
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Endpoint</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Web service</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Method</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Parameters</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                        <p class="tabletext">Returns</p>
                                                                    </th>
                                                                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">
                                                                        <p class="tabletext">Details</p>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td rowspan="2" class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">Accounts endpoint </p>
                                                                        <p class="tabletext">Class <code>AccountsController.cs</code></p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p><code>portal/accounts/sites </code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">POST</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">string Id</p>
                                                                        <p class="tabletext">string RequestedBy</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext">void</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Initiates the provisioning of a client portal site.</p>
                                                                        <p class="tabletext">Pass account number and requesting user id.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p><code>portal/accounts/sites/url</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">GET</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">string id</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">string</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">Retrieves the client portal site URL.</p>
                                                                        <p class="tabletext">Pass account number. If account number contains invalid URL characters, pass as query string parameter.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyD-Regular-LightRows">&#160;</th>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">Projects endpoint </p>
                                                                        <p class="tabletext">Class <code>FCProfileController.cs</code></p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p><code>portal/projects/sites/url</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">GET</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">string id</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p class="tabletext">string</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">Retrieves the project portal site URL.</p>
                                                                        <p class="tabletext">Pass project id. If id contains invalid URL characters, pass as query string parameter.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyE-Regular-LightRows">&#160;</th>
                                                                    <th class="TableStyle-PatternedRows-BodyD-Regular-LightRows">&#160;</th>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext">PortalUser endpoint </p>
                                                                        <p class="tabletext">Class <code>PortalUserController.cs</code></p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p><code>portal/users/sites/url</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext">GET</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext">string id</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p class="tabletext">string</p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyA-Regular-DarkerRows">
                                                                        <p class="tabletext">Retrieves the portal user site URL.</p>
                                                                        <p class="tabletext">Pass portal user id. If id contains invalid URL characters, pass as query string parameter.</p>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <h2>Pre-requisites</h2>
                                                <p>For the example below, assume the WebAPI web service is installed as <code>http://web-service-webapi.dept-dept.gc.ca</code>.</p>
                                                <ul>
                                                    <li value="1">
                                                        <p>A build of the <code>EGCS.Portal</code> solution, which is assumed to be available in a directory <code>_Build</code>.</p>
                                                    </li>
                                                    <li value="2">
                                                        <p>Choose a server to host the <code>WebAPI</code> web service. This should be a server located “near” the GCPM CRM server. The server must be able to make network connections to the GCPM server. It must be an IIS web server. The server does not need to be dedicated to the <code>WebAPI</code> web service, overall load from the <code>WebAPI</code> web service should be light.</p>
                                                        <p><b>Suggestion: host the </b><code style="font-weight: bold;">WebAPI</code><b> web service and the RDA web service on the same web server</b>.</p>
                                                    </li>
                                                    <li value="3">
                                                        <p>Choose a HOST name which will be used by GCPM to access the <code>WebAPI</code> web service.</p>
                                                        <p>HOST name for this example: <code>web-service-webapi.dept-dept.gc.ca</code></p>
                                                        <p>Suggestion: if the <code>WebAPI</code> web service is co-hosted with the RDA web service, the HOST name from the RDA web service can be re-used.</p>
                                                    </li>
                                                    <li value="4">
                                                        <p>Choose a port for the WebAPI web service. Connections to the WebAPI web service use HTTPS by default (port 443).</p>
                                                        <p style="font-weight: bold;">Suggestion: if the <code>WebAPI</code> web service is co-hosted with the RDA web service, a single web application can listen on multiple ports and protocols (HTTP and HTTPS, port 80 and 443). In the example below, from the GCPM integration environment, the <code>WebAPI</code> web service and RDA web service share the same web application and HOST name, but use different bindings.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/Portal/SiteBinding2.png"><img class="MCPopupThumbnail img" data-mc-width="392" data-mc-height="124" src="../Resources/Images/Portal/SiteBinding2_thumb_0_48.png" style="mc-thumbnail: popup;" tabindex="" /></a></p>
                                                    </li>
                                                    <li value="5">
                                                        <p>Ensure that the GCPM CRM server can resolve the HOST name as the correct network address for the <code>WebAPI</code> web service. This can be accomplished by DNS, or by modifying the <code>C:\Windows\System32\drivers\etc\hosts</code> file on the GCPM CRM server.</p>
                                                        <p>Example: The GCPM CRM server must be able to resolve <code>web-service-webapi.dept-dept.gc.ca</code></p>
                                                    </li>
                                                    <li value="6">
                                                        <p>Choose or create a service account for the <code>WebAPI</code> web service. For an on-premises installation of the web service, this should be a normal domain account.</p>
                                                        <p style="font-weight: bold;">Suggestion: use the service account from the RDA web service.</p>
                                                    </li>
                                                    <li value="7">
                                                        <p>The <code>WebAPI</code> web service requires a certificate to authenticate itself to the Portal Web Service. See <a href="Cert-RDAWebService.htm" class="MCXref xref">RDA web service and portal web service certificates</a>.</p>
                                                        <p>The WebAPI web service should have a certificate with a client and server profile, and a subject name which matches the HOST name chosen above (unless the RDA web service certificate is being reused).</p>
                                                        <p>Example subject name: <code>web-service-webapi.dept-dept.gc.ca</code></p>
                                                        <p>The certificate must include a private key.</p>
                                                        <p>The certificate should be installed in the Local Computer, Personal certificate store on the server hosting the <code>WebAPI</code> web service.</p>
                                                        <p><code>certutil.exe -importpfx web-service-webapi.dept-dept.gc.ca.pfx</code>
                                                            <br /><b>Suggestion: use the certificate issued to the RDA web service.</b>
                                                        </p>
                                                    </li>
                                                    <li value="8">
                                                        <p>•	The <code>WebAPI</code> web service must have an SSL certificate. This certificate does not need to have been issued by a public certificate authority (Entrust, Verisign, etc). However, the SSL certificate must be trusted by the GCPM CRM server so that GCPM can make SSL connections to the <code>WebAPI</code> web service.</p>
                                                    </li>
                                                    <li value="9">
                                                        <p>The service account must have read access to the certificate private key.</p>
                                                        <p>Launch <code>mmc.exe</code>, add the “Certificates” snap-in for the local computer. Locate the certificate in the “Personal” store.</p>
                                                        <p>Right-click on the certificate and select <b>All tasks-&gt; Manage Private Keys…</b></p>
                                                    </li>
                                                    <li value="10">
                                                        <p>Ensure the service account has “<b>Read</b>” access.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/Portal/ReadAccess.png"><img class="MCPopupThumbnail img" data-mc-width="624" data-mc-height="190" src="../Resources/Images/Portal/ReadAccess_thumb_0_48.png" style="mc-thumbnail: popup;" tabindex="" /></a></p>
                                                    </li>
                                                    <li value="11">
                                                        <p>The CA certificate which issued the WebAPI web service certificate should be registered in Trusted Root Certification Authorities. This certificate should <u>not</u> have a private key.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../Resources/Images/Portal/PrivateKey2.png"><img class="MCPopupThumbnail img" data-mc-width="624" data-mc-height="149" src="../Resources/Images/Portal/PrivateKey2_thumb_0_48.png" style="mc-thumbnail: popup;" tabindex="" /></a><br /></p>
                                                    </li>
                                                </ul>
                                                <h2>Installation</h2>
                                                <ol>
                                                    <li value="1">If it has not been created, provision an IIS web application to host the <code>WebAPI</code>&#160;web service.<br /><ul><li value="1"><p>Provision the web application at <code>C:\inetpub\rda-portal</code>.</p></li><li value="2">It should be use a HTTP binding (add an HTTPS binding if the web application already exists).</li><li value="3"><p>It should be bound to the port selected in the prerequisites.</p></li><li value="4"><p>It is suggested to configure a HOST name on the binding. The name must match the HOST name selected in prerequisites.</p></li><li value="5"><p>It should use the SSL certificate from the prerequisites.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../Resources/Images/Portal/EditSiteBinding2.png"><img class="MCPopupThumbnail img" data-mc-width="373" data-mc-height="222" src="../Resources/Images/Portal/EditSiteBinding2_thumb_0_48.png" tabindex="" /></a></p></li><li value="6"><p>Create a folder for the <code>WebAPI</code> web service</p><p><code>C:\inetpub\rda-portal\EGCS.Portal.WebService.WebAPI.</code></p></li><li value="7"><p>Convert the WebAPI web service folder into an IIS application.</p><p>Assign an application pool with the desired service account to run the application.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../Resources/Images/Portal/ConvertApp3.png"><img class="MCPopupThumbnail img" data-mc-width="332" data-mc-height="259" src="../Resources/Images/Portal/ConvertApp3_thumb_0_48.png" tabindex="" /></a></p></li><li value="8">&#160;</li><li value="9"><br /></li></ul></li>
                                                    <li value="2">Install the portal web service<br /><code>.\_Build\Scripts\Install-WebServiceWebAPI.ps1 –Config .</code><br /><code>\_Build\Config\&lt;environment&gt;.egcs.config</code><br />This command will install web application files to path:<br /><code>C:\inetpub\rda-portal\EGCS.Portal.WebService.WebAPI</code></li>
                                                    <li value="3">
                                                        <p>Edit <code>web.config</code> settings for the <code>WebAPI</code> web service.<br />The web.config section <code>&lt;system.serviceModel&gt;</code> is not required, and should be removed.<br /></p>
                                                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                                                            <col class="TableStyle-PatternedRows-Column-Regular" style="width: 319px;" />
                                                            <col class="TableStyle-PatternedRows-Column-Regular" />
                                                            <thead>
                                                                <tr class="TableStyle-PatternedRows-Head-Header1">
                                                                    <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Setting</th>
                                                                    <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Description</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p class="tabletext"><code>PortalWebServiceClientThumbprint</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Thumbprint of the certificate which the <code>WebAPI</code> web service uses to authenticate itself to the Portal web service.

</p>
                                                                        <p class="tabletext"><b>Suggestion: use the certificate issued to the RDA web service.
</b>
                                                                        </p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows"><code>PortalWebServiceRootCAThumbprint</code>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">Thumbprint of the root CA certificate which issued the <code>WebAPI</code> web service certificate, and the Portal web service certificate.</td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows"><code>PortalWebServiceServerThumbprint</code>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Thumbprint of the certificate used by the Portal web service to identify itself.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p><code>PortalWebServiceUrl_Account</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">URL of the ‘<code>Account.svc</code>’ endpoint of the Portal web service.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p><code>PortalWebServiceUrl_FCProfile</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">URL of the ‘<code>FCProfile.svc</code>’ endpoint of the Portal web service.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                        <p><code>PortalWebServiceUrl_PortalUser</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                        <p class="tabletext">URL of the ‘<code>PortalUser.svc</code>’ endpoint of the Portal web service.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                                    <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                        <p><code>AdfsMetadataEndpoint</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                        <p class="tabletext">Not currently used. Ignore.</p>
                                                                    </td>
                                                                </tr>
                                                                <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                                    <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                        <p><code>Audience</code>
                                                                        </p>
                                                                    </td>
                                                                    <td class="TableStyle-PatternedRows-BodyA-Regular-DarkerRows">
                                                                        <p class="tabletext">Not currently used. Ignore.</p>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </li>
                                                    <li value="4">
                                                        <p>Create a new <b>CFG System Configuration</b> record in GCPM. Set <br /><b>Key</b> = <code>PT_WEBAPI_URL</code> and<br /><b>Value</b> = absolute URL of your WebAPI web service endpoint. If there's already a record with the same key, modify the existing record instead of creating a new one."</p>
                                                    </li>
                                                    <li value="5">Save and close the record.</li>
                                                </ol>
                                                <p><a class="MCHelpControl MCHelpControl-Concept conceptLink" data-mc-concepts="Portal" href="javascript:void(0);" data-mc-topics="About GCCF|GCCFAbout.htm#aanchor166||About the portal|AboutPortal.htm#aanchor395||About the portal|AboutPortal.htm#aanchor396||ADFS extensions web application|ADFSExtensionswebApp.htm#aanchor217||Alphinat SmartGuide documentation|SmartGuide/AlphinatDoc.htm#aanchor44||Authentication for GCCF users|GCCFAuthentication.htm#aanchor22||Authentication for RDA users|AuthenticationRDA.htm#aanchor214||Build and deploy SPFx apps|SPFxAppsBuildDeploy.htm#aanchor140||Configure forms for the portal|SmartGuide/ConfigureApplic on portal.htm#aanchor442||Create new forms|SmartGuide/CreateNewForms.htm#aanchor242||Data transfer from the portal to GCPM|DataTransfer.htm#aanchor256||Deploying forms for the portal with SmartGuide|SmartGuide/PortalFormDeploy.htm#aanchor0||Developing forms for the portal with SmartGuide|SmartGuide/PortalFormDev.htm#aanchor203||Developing portal forms - connections|SmartGuide/PortalFormDevConnections.htm#aanchor106||Developing SPFx Web Parts|SPFxAppsProjectFolders.htm#aanchor145||Documents on the portal |PortalDocs.htm#aanchor422||Dynamic portal forms|SmartGuide/PortalFormDynamic.htm#aanchor394||EGCS.Portal configuration|EGCSPortalConfig.htm#aanchor368||EGCS.Portal Visual Studio Solution|VSSolutionEGCSPortal.htm#aanchor321||FormManager web service overview|WebServicePortalFormMgr.htm#aanchor10||FormManager web service|WebServiceFormMgr.htm#aanchor127||GC.GCCF configuration|GCCFConfig.htm#aanchor388||GC.GCCF Visual Studio Solution|VSSolutionGCCF.htm#aanchor428||GCCF certificates|Cert-GCCF.htm#aanchor18||GCCF common domain web application|GCCFCommonDomainWebApp.htm#aanchor320||GCCF database|GCCFDatabase.htm#aanchor205||GCCF metadata|GCCFMetadata.htm#aanchor267||GCPM authentication|GCPMAuthentication.htm#aanchor8||GCPM&#160;Smartlet Structure |SmartGuide/PortalFormSmartletStructure.htm#aanchor213||Invite a GC&#160;Client to the portal|UsingPortal/InviteClient.htm#aanchor191||Navigate the portal|UsingPortal/NavigatePortal.htm#aanchor144||Portal - master page overview|PortalMasterPage.htm#aanchor25||Portal branding|PortalBranding.htm#aanchor261||Portal configuration - invitation email|PortalConfigInviteEmail.htm#aanchor227||Portal document integration with GCPM&#160;|PortalDocIntegGCPM.htm#aanchor231||Portal entity relationship diagram|../Modules/ERDs/ERD Portal.htm#aanchor131||Portal integration with GCPM|Portal-GCPMIntegration.htm#aanchor2||Portal release notes 1.0|PortalReleaseNotes1.0.htm#aanchor38||Portal security|PortalSecurity.htm#aanchor263||RDA web service and portal web service certificates|Cert-RDAWebService.htm#aanchor215||RDA web service|WebServiceRDA.htm#aanchor123||Reverse proxy server for the portal|PortalReverseProxy.htm#aanchor212||SharePoint - portal site structure|PortalSharepointSiteStructure.htm#aanchor156||SharePoint web service|WebserviceSharePoint.htm#aanchor313||SPFx apps for the portal|SPFxAppsPortal.htm#aanchor208||SSL certificate|Cert-SSL.htm#aanchor310||Submit forms on the portal|UsingPortal/SubmitForms.htm#aanchor357||Submit tabular data with a form|UsingPortal/SubmitFormTable.htm#aanchor162||Web services for portal integration|WebServicesPortal.htm#aanchor238||WebAPI&#160;web service|#aanchor362||Windows service - document management|WindowsDocMgt.htm#aanchor184||Windows service - site creation|WindowsSiteCreation.htm#aanchor255"><span class="MCHelpControl-ConceptHotSpot_"><img class="MCHelpControl_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Concept Link Icon" />See Also</span></a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>