<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="fr-ca" lang="fr-ca" class="_Skins_HTML5___Top_Navigation_Coronado" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Coin développer|[%=System.LinkedTitle%]|Authentification et sécurité">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Métadonnées FPGC</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/select-language.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.remove-highlight-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/highlight.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/sanitize-html.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../A_Welcome pages/StartHere.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search our help and documentation" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>Tous les fichiers</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Chercher">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="search-container">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                                <input class="search-field needs-pie" type="search" placeholder="Chercher" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>Tous les fichiers</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Chercher">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="row collapse">
                                        <div class="top-bar">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Changer de langue">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="select language" />
                                                    </button>
                                                    <button class="button needs-pie print-button" title="Imprimer">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                    </button>
                                                    <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                    </button>
                                                    <button class="button needs-pie next-topic-button" title="Navigate next">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                    </button>
                                                    <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="remove highlight" />
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">Vous êtes ici : </span>
                                                </div>
                                            </div> </div>
                                        <div class="topic-layout">
                                            <div>
                                                <div class="side-menu">
                                                    <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/Release_2_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                                <div class="side-content">
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadside-content"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Fermé" data-mc-alt2="Ouvert" />Conseils de recherche</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>La recherche est basée sur un mot clé.</p>
                                                            <p><samp>Par exemple, procédures</samp>
                                                            </p>
                                                            <p>Ne cherchez pas avec le langage naturel</p>
                                                            <p><samp>Par exemple, &lt; Comment puis-je écrire une nouvelle procédure? &gt;</samp>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div><a class="cta" href="https://technet.microsoft.com/en-us/library/mt812330.aspx"><div class="cta center"><p>Dynamics 365 Help</p></div></a>
                                            </div>
                                            <div>
                                                <h1><a name="aanchor166"></a>
                                                    <MadCap:concept term="Portal" />Métadonnées FPGC</h1>
                                                <p><b>Métadonnée</b> est un terme qui revient fréquemment au moment de discuter des exigences techniques de la connexion à l'environnement de la fédération des justificatifs du gouvernement du Canada (FJGC). Le portail et les fournisseurs de la FJGC&#160;(CléGC et SecureKey) créent des fichiers de métadonnées. Même si les exigences relatives aux métadonnées de la FJGC&#160;sont exposées officiellement dans la version&#160;2 des Solutions technologiques d'authentification électronique (STAE) en particulier, elles peuvent être résumées comme suit&#160;:</p>
                                                <ul>
                                                    <li value="1">Les métadonnées fournissent toute l'information que le portail et CléGC ou SecureKey a besoin de connaître à propos de l'autre pour échanger des messages SAML chiffrés. Cela comprend les URL et les certificats de points de terminaison&#160; SAML. Les métadonnées décrivent aussi un ensemble de promesses quant à la façon dont chaque terminaison traitera les messages &#160;SAML. Bref, les métadonnées sont un contrat.<br /></li>
                                                    <li value="2">Les métadonnées sont fournies dans un fichier XML.<br /></li>
                                                    <li value="3">Tous les fichiers de métadonnées de la &#160;FJGC contiennent une signature XML valide utilisant le certificat de signature de l'émetteur. La signature est intégrée au fichier XML&#160;lui-même. Pour le portail, cela veut dire que le fichier XML des métadonnées doit être signé par la clé privée du certificat de signature de la gestion des justificatifs internes &#160;(GJI) des portails.<br /></li>
                                                    <li value="4">Une fois la signature apposée, le contenu du fichier de métadonnées ne peut être changé d'aucune façon, sans quoi la signature deviendra invalide.<br /></li>
                                                    <li value="5">Le fichier de métadonnées contient les certificats de chiffrement et de signature de l'entité qui l'a émis. Seules des clés publiques sont incluses dans des métadonnées – les clés privées ne le sont pas.<ul><li value="1">Pour CléGC et SecureKey, il s'agit d'une copie de leurs certificats de chiffrement et de signature de la GJI.</li><li value="2">Pour le portail, il s'agit d'une copie des certificats de chiffrement et de signature de la GJI du portail.</li></ul><p>Rappelons que seules les clés publiques sont incluses dans un fichier de métadonnées. Les clés privées ne sont jamais fournies à qui que ce soit.</p></li>
                                                </ul>
                                                <p>Pour générer un fichier de métadonnées, le portail doit s'être vu émettre un ensemble de certificats de signature et de chiffrement de la GJI.</p>
                                                <p>Le fichier de métadonnées doit choisir une identification d'entité unique.</p>
                                                <ul>
                                                    <li value="1">L'identification d'identité doit être unique dans tout l'ensemble de portails de la FJGC. Aucun portail ne peut avoir la même identification d'entité qu'un autre portail.</li>
                                                    <li value="2">L'identification d'identité ressemble à un URL et contient typiquement le nom DNS&#160;du portail. Cependant, l'identification d'identité n'est pas un véritable URL.</li>
                                                    <li value="3">L'identification d'identité n'est jamais vue par les utilisateurs.</li>
                                                    <li value="4">L'identification d'identité ne peut être changée tant que le portail existe.</li>
                                                    <li value="5">Pour le portail, l'identification d'identité doit correspondre à l'identification d'identité configurée dans Active Directory Federation Services (ADFS).</li>
                                                    <li value="6">Par exemple, <code>https://&lt;portal ADFS DNS name&gt;/adfs/services/trust</code><br />(Cette identification d'identité est fondée sur le style par défaut d'identification d'identité qu'ADFS générerait.)<br /></li>
                                                </ul>
                                                <p>Le fichier de métadonnées décrit un ensemble de points de terminaison&#160;SAML fournis par le portail ou par la CléGC ou&#160;SecureKey. Il fournit un URL Internet pour chaque point de terminaison. Les demandes SAML&#160;envoyées du portail à la CléGC ou à SecureKey et qui en sont retournées seront censées envoyer du trafic à ces &#160;URL de point de terminaison. Dans le cas du portail, certains&#160; des URL sont mis en correspondance avec ADFS. D'autres sont mis en correspondance avec l'application Web des extensions ADFS personnalisée.<br /></p>
                                                <ul>
                                                    <li value="1">Les métadonnées ne sont valides que jusqu'à l'expiration du certificat intégré.<br /></li>
                                                    <li value="2">Puisque les certificats expirent, le portail et la CléGC ou SecureKey doivent obtenir périodiquement de nouveaux certificats de GJI et générer de nouveaux fichiers de métadonnées. L'activation de nouvelles coordonnées doit être coordonnée des deux côtés, sans quoi le portail sera incapable de communiquer avec la CléGC ou SecureKey.</li>
                                                    <li value="3">Pour la production, l'activation de nouvelles métadonnées est coordonnées par voie de téléconférence. Pour le développement, l'activation de nouvelles métadonnées est simplement prévue à une date et une heure déterminées au préalable.</li>
                                                </ul>
                                                <h2>Rafraîchissement des métadonnées – métadonnées du portail</h2>
                                                <p>Lorsque les certificats de la FJGC du portail expirent, il faut obtenir de nouveaux certificats de la FJGC, générer un nouveau fichier de métadonnées, communiquer les nouvelles métadonnées à la CléGC et à SecureKey et activer les nouvelles métadonnées en même temps que le font la CléGC et&#160;SecureKey.</p>
                                                <h4>Phase 1 – Récupérer et traiter les nouveaux certificats de la FJGC, générer des métadonnées.</h4>
                                                <p>Pour en savoir plus sur la récupération et le traitement des certificats, <a href="Cert-GCCF.htm" class="MCXref xref">Certificats de la FJGC</a></p>
                                                <ol>
                                                    <li value="1">Une ALE&#160;(autorité locale d'enregistrement) du portail demande les nouveaux certificats de la&#160;FJGC à la GJI.<br /></li>
                                                    <li value="2">La GJI génère les nouveaux certificats. L'ALE reçoit la demande et les codes d'autorisation. L'ALE récupère les certificats de la&#160;FJGC à l'aide du client pour ordinateur de bureau Entrust.<br /></li>
                                                    <li value="3">Les certificats de la&#160;FJGC sont exportés d'Entrust dans le format <code>.pfx</code>. Il devrait y avoir deux&#160;fichiers&#160;: un certificat de chiffrement et un certificat de signature. Les deux&#160;certificats doivent avoir des clés privées. Chaque fichier ne devrait contenir qu'un seul certificat.<br /></li>
                                                    <li value="4">Les certificats de chiffrement et de signature sont traités au moyen d'OpenSSL et sont enregistrés comme paire de fichiers <code>.p12</code>.</li>
                                                    <li value="5">Ensure that the <code>GC.GCCF</code> configuration file <code>&lt;portal&gt;.config.xml</code> file is updated with the subject name of the new GCCF certificates. Subject names for GCCF certificates always start with GCCF. Ensure that a build of the <code>GC.GCCF</code> project is available which has this updated configuration.<br /><p><code>CertificateSubjectIcm = "GCCF&lt;portal subject name&gt;"</code><br /></p></li>
                                                    <li value="6">Générez un fichier de métadonnées pour le portail (pour plus de détails, voir «&#160;Créer des métadonnées de portail&#160;» ci-dessous).<br /><code>_Build\Scripts\Update-AdfsMetadata.ps1 -SigningCertificateFile .\&lt;certificate name&gt;.sig.p12 -EncryptionCertificateFile .\&lt;certificate name&gt;.enc.p12 -InputMetadataFile ".\&lt;old Portal metadata&gt;.xml" -OutputMetadataFile .\&lt;portal ADFS DNS name&gt;.&lt;date&gt;.xml</code><br /></li>
                                                    <li value="7">Le fichier de métadonnées est envoyé au groupe de la gestion des justificatifs externes&#160; (GJE) de Services partagés&#160;Canada &#160;(SPC) aux fins de validation et de distribution de la CléGC ou de SecureKey.</li>
                                                    <li value="8">Une période de maintenance est réservée avec le groupe de la GJE&#160;pour effectuer la mise à jour des métadonnées. La GJE&#160;planifiera une conférence avec les responsables du portail, de la CléGC et de SecureKey, simultanément.</li>
                                                </ol>
                                                <h4>Phase 2 – Mettre à jour ADFS, les extensions ADFS et SharePoint en fonction des nouveaux certificats de la FJGC</h4>
                                                <ol>
                                                    <li value="1">On suppose que le certificat racine de la GJI a été chargé dans le magasin de certificats du serveur ADFS lors de l'installation initiale du portail. Cette étape ne devrait pas être refaite, mais elle est incluse par souci d'exhaustivité.<br /><code>.\_Build\Scripts\Import-IcmRootCertificateSharePoint.ps1</code><br /></li>
                                                    <li value="2">Les certificats .p12 de la FJG&#160;Csont chargés dans le magasin de certificats de Windows sur le serveur ADFS (magasin de la machine locale, dossier personnel). <u>Les clés privés doivent être incluses dans les certificats</u>. Aucun changement n'est apporté a ADFS. This may be done with PowerShell <code>Import-PfxCertificate</code> or <code>certutil.exe</code>.<br /><code>certutil.exe -importpfx &lt;certificate name&gt;.sig.p12</code><br /><code>certutil.exe -importpfx &lt;certificate name&gt;.eng.p12</code></li>
                                                    <li value="3">Les clés privées pour les certificats de chiffrement et de signature sont mises à jour afin d'accorder des permissions de lecture au compte de service ADFS.<br /><code>.\_Build\Scripts\Configure-AdfsCertificatePermissions.ps1</code></li>
                                                    <li value="4">Le certificat de signature de la FJGC est exporté, <u>sans clé privée</u>, dans un fichier <code>.cer</code> file. This file should be copied to a SharePoint server.<br /><code>.\_Build\Scripts\Export-GccfSigningCertificate.ps1 -SigningCertificateFile .\&lt;certificate name&gt;.sig.cer</code><br />.</li>
                                                    <li value="5">Pendant la téléconférence planifiée avec les responsables de la CléGC et de SecureKey, les nouvelles métadonnées sont activées&#160;:<br /><ul><li value="1">Les responsables de la CléGC et de SecureKey activent les métadonnées de leur côté.</li><li value="2">Les nouveaux certificats de la FJGC du portail sont activés en tant que principaux certificats de signature et de chiffrement dans ADFS.<br /><code>.\_Build\Scripts\Update-AdfsGCCFCertificates.ps1</code><br /></li><li value="3">Configuration for ADFS Extensions is updated with the thumbprint of the new GCCF signing certificate.<br />(edit file) <code>C:\inetpub\wwwroot_gccf_adfs\AdfsExtensions\App_Data\sp-extended.xml</code><br /></li><li value="4">Recycle the application pool of the ADFS Extension web app:<br /><code>C:\Windows\System32\inetsrv\appcmd.exe recycle apppool GccfAdfsExtensions</code></li><li value="5">The SharePoint trusted token issuer is updated with the new GCCF signing certificate.<br /><code>$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2 "$(get-location)\&lt;certificate name&gt;sig.cer"</code><br /><code>Set-SPTrustedIdentityTokenIssuer -Identity "gccf-adfs" -ImportTrustCertificate $sigNewCert</code></li></ul></li>
                                                </ol>
                                                <h2>Rafraîchissement des métadonnées – CléGC ou SecureKey</h2>
                                                <p>Lorsque les certificats de la FJGC expirent pour la CléGC ou SecureKey, il faut obtenir de nouveaux certificats de la FJGC et fournir un nouveau fichier de métadonnées au portail. Ce fichier de métadonnées doit être chargé dans ADFS et l'application Web des extensions&#160; ADFS pendant une téléconférence prévue d'avance.</p>
                                                <ol>
                                                    <li value="1">Les responsables de la CléGC ou de SecureKey commandent les nouveaux certificats, génèrent un nouveau fichier de métadonnées et fournissent les métadonnées au groupe de la GJE aux fins de vérification et de distribution dans le portail.<br /></li>
                                                    <li value="2">La&#160;GJE planifie une période de maintenance et une téléconférence avec les responsables du portail et de la CléGC&#160;ou de SecureKey.<br /></li>
                                                    <li value="3">Pendant la téléconférence&#160;:<br /><ul><li value="1">Les nouvelles métadonnées des fournisseurs sont chargées dans ADFS. Cette commande lancera un message d'avertissement concernant les liens SAML non pris en charge, ce qui est prévu; le message peut être ignoré. <b>«&#160;AVERTISSEMENT&#160;&#160;: PS0031&#160;: Certaines parties du document de métadonnées ont été ignorées. MSIS7524&#160;: Un point de terminaison 'SamlSingleLogoutService' a été ignoré parce que son lien 'urn:oasis:names:tc:SAML:2.0:bindings:SOAP' n'est pas pris en charge.&#160;»</b><br /><code>Update-ADFSClaimsProviderTrust -TargetName "SecureKey" -MetadataFile "$(get-location)\&lt;SecureKey metadata file&gt;.xml"</code><p>or</p><p><code>Update-ADFSClaimsProviderTrust -TargetName "GCKey" -MetadataFile "$(get-location)\&lt;GCKey metadata file&gt;.xml"</code></p></li><li value="2">The provider’s metadata file is loaded into the ADFS Extensions web application. Note that SecureKey is IDP1 and GCKey is IDP2 in the web application.<br /><code>copy "$(get-location)\&lt;SecureKey metadata file&gt;.xml" C:\inetpub\wwwroot_gccf_adfs\AdfsExtensions\App_Data\idp1.xml</code><p>or<br /><code>copy "$(get-location)\&lt;GCKey metadata file&gt;.xml" C:\inetpub\wwwroot_gccf_adfs\AdfsExtensions\App_Data\idp2.xml</code></p></li></ul></li>
                                                </ol>
                                                <h2>Créer un fichier de métadonnées de portail</h2>
                                                <p>La façon recommandée de créer un package de métadonnées pour le portail est un script PowerShell personnalisé inclus. Ce script PowerShell lira un package de métadonnées existant qui est traité comme un gabarit. Le gabarit est mis à jour afin de correspondre aux détails techniques du portail. Une fois que le package de métadonnées a été mis à jour, il sera signé à l'aide du certificat de signature du portail et écrit dans un nouveau fichier.</p>
                                                <p>Si aucun package de métadonnées antérieur n'a été créé, un gabarit de fichier de métadonnées a été fourni dans la sortie <code>_Build</code> output from the <code>GC.GCCF</code>.</p>
                                                <p>Un fichier de métadonnées ne peut être créé avant que les certificats de GJI de la FJGC&#160;aient été obtenus et traités par OpenSSL.</p>
                                                <h4>Premier fichier de métadonn</h4>
                                                <p>Au moment de créer un fichier de métadonnées pour le portail, il faut préciser le nom DNS d'ADFS. Il s'agit du nom DNS provenant d'Internet qui servira à diriger le trafic vers le serveur ADFS. Ce peut être le même nom DNS que&#160;SharePoint ou un nom différent.</p>
                                                <p>À titre d'exemple, le portail de production de l'Agence de promotion économique du &#160;Canada atlantique (APECA) utilise ce qui suit&#160;:</p>
                                                <ul>
                                                    <li value="1"><a href="https://direct.acoa-apeca.gc.ca"><span class="Hyperlink">https://direct.acoa-apeca.gc.ca</span></a> pour SharePoint</li>
                                                    <li value="2"><a href="https://direct.acoa-apeca.gc.ca"><span class="Hyperlink">https://direct.acoa-apeca.gc.ca</span></a> pour ADFS</li>
                                                </ul>
                                                <p>Le portail de production de Diversification de l'économie de l'Ouest Canada (DEO) utilise :</p>
                                                <ul>
                                                    <li value="1"><a href="https://www2.wd-deo.gc.ca"><span class="Hyperlink">https://www2.wd-deo.gc.ca</span></a> pour SharePoint</li>
                                                    <li value="2"><a href="https://akwww2.wd-deo.gc.ca"><span class="Hyperlink">https://akwww2.wd-deo.gc.ca</span></a> pour ADFS</li>
                                                </ul>
                                                <p>Aucune exigence technique n'impose l'utilisation du même nom DNS pour ADFS et SharePoint. Il s'agit d'une configuration plus souple permettant de choisir un nom&#160;DNS différent pour SharePoint et pour ADFS, ce que l'on recommande pour les nouveaux portails.</p>
                                                <p>Pour générer le premier fichier de métadonnées pour le portail à l'aide du gabarit fourni&#160;:</p>
                                                <p><code>_Build\Scripts\Update-AdfsMetadata.ps1 -SigningCertificateFile .\&lt;certificate name&gt;.sig.p12 -EncryptionCertificateFile .\&lt;certificate name&gt;.enc.p12 -InputMetadataFile ".\_Build\Config\EGCS-SESC\ADFS Metadata\adfs_metadata_template.xml" -OutputMetadataFile ".\&lt;portal ADFS DNS name&gt;.&lt;date&gt;.xml" -AdfsDnsName &lt;portal ADFS DNS name&gt;</code>
                                                </p>
                                                <p>Cette commande&#160;:</p>
                                                <ul>
                                                    <li value="1">Demande le mot de passe des certificats de signature et de chiffrement</li>
                                                    <li value="2">Reads<code> adfs_metadata_template.xml</code></li>
                                                    <li value="3">Change la chaîne d'identification d'entité des métadonnées pour<code>https://&lt;portal ADFS DNS name&gt;/adfs/services/trust</code></li>
                                                    <li value="4">Met à jour les URL des points de terminaison SAML dans les métadonnées à utiliser<code>https://&lt;portal ADFS DNS name&gt;</code></li>
                                                    <li value="5">Exporte les certificats de chiffrement et de signature de la FJGC et les intègre aux métadonnées.<br />Les clés privées ne sont pas exportées.</li>
                                                    <li value="6">Signe le package de métadonnées avec le certificat de signature de la FJGC</li>
                                                    <li value="7">Exporte le package de métadonnées dans un fichier XML<code>&lt;portal ADFS DNS name&gt;.&lt;date&gt;.xml</code></li>
                                                </ul>
                                                <h4>Mise à jour du fichier de métadonnées du portail</h4>
                                                <p>Lorsque vient le moment de rafraîchir les métadonnées du portail, une commande semblable est utilisée. Dans ce cas, les anciennes données du portail sont lues et mises à jour en fonction des nouveaux certificats. Aucun changement n'est apporté à l'identification d'entité des métadonnées ou aux URL de points de terminaison SAML.</p>
                                                <p><code>_Build\Scripts\Update-AdfsMetadata.ps1 -SigningCertificateFile .\&lt;certificate name&gt;.sig.p12 -EncryptionCertificateFile .\&lt;certificate name&gt;.enc.p12 -InputMetadataFile ".\_Build\Config\EGCS-SESC\ADFS Metadata\adfs_metadata_template.xml" -OutputMetadataFile ".\&lt;portal ADFS DNS name&gt;.&lt;date&gt;.xml"</code>
                                                </p>
                                                <p>Cette commande&#160;:</p>
                                                <ul>
                                                    <li value="1">Demande le mot de passe des certificats de signature et de chiffrement</li>
                                                    <li value="2">Reads<code> &lt;old Portal metadata&gt;.xml</code></li>
                                                    <li value="3">Exporte les certificats de chiffrement et de signature de la FJGC et les intègre aux métadonnées.<br />Les clés privées ne sont pas exportées.</li>
                                                    <li value="4">Signe le package de métadonnées avec le certificat de signature de la FJGC</li>
                                                    <li value="5">Exporte le package de métadonnées dans un fichier XML<code>&lt;portal ADFS DNS name&gt;.&lt;date&gt;.xml</code></li>
                                                </ul>
                                                <p><a class="MCHelpControl MCHelpControl-Concept conceptLink" data-mc-concepts="Portal" href="javascript:void(0);" data-mc-topics="À propos de la FJGC|GCCFAbout.htm#aanchor308||À propos du portail|AboutPortal.htm#aanchor146||À propos du portail|AboutPortal.htm#aanchor147||Aperçu du service Web FormManager|WebServicePortalFormMgr.htm#aanchor75||Application Web des extensions des services ADFS (Active Directory Federation Services)|ADFSExtensionswebApp.htm#aanchor268||Application&#160;Web de domaine commun de la fédération des justificatifs du gouvernement du &#160;Canada (FJGC)|GCCFCommonDomainWebApp.htm#aanchor0||Applications SPFx pour le portail|SPFxAppsPortal.htm#aanchor102||Authentification du GPSC|GCPMAuthentication.htm#aanchor274||Authentification pour les utilisateurs de la fédération des justificatifs du gouvernement du Canada (FJGC)|GCCFAuthentication.htm#aanchor203||Authentification pour les utilisateurs des agences de développement régional (ADR)|AuthenticationRDA.htm#aanchor386||Base de données de la fédération des justificatifs du gouvernement du Canada (FJGC)|GCCFDatabase.htm#aanchor402||Bâtir et déployer des applications SharePoint Framework (SPFx)|SPFxAppsBuildDeploy.htm#aanchor161||Certificat de SSL|Cert-SSL.htm#aanchor247||Certificats de la FJGC|Cert-GCCF.htm#aanchor12||Certificats de service Web d'agences régionales de développement (ADR)&#160;et de service Web de portail|Cert-RDAWebService.htm#aanchor267||Conception de formulaires pour le portail avec SmartGuide|SmartGuide/PortalFormDev.htm#aanchor418||Configuration de GC.GCCF|GCCFConfig.htm#aanchor87||Configuration du portail – courriel d'invitation|PortalConfigInviteEmail.htm#aanchor133||Configuration du portail de la Solution d'entreprise pour les subventions et les contributions&#160;(SESC)|EGCSPortalConfig.htm#aanchor164||Configurer des formulaires pour le portail|SmartGuide/ConfigureApplic on portal.htm#aanchor30||Créer de nouveaux formulaires|SmartGuide/CreateNewForms.htm#aanchor108||Déploiement de formulaires pour le portail avec SmartGuide|SmartGuide/PortalFormDeploy.htm#aanchor69||Développement de composants WebPart SPFx|SPFxAppsProjectFolders.htm#aanchor56||Diagramme de relation d'entité de portail|../Modules/ERDs/ERD Portal.htm#aanchor290||Documentation de SmartGuide d'Alphinat|SmartGuide/AlphinatDoc.htm#aanchor114||Documents dans le portail|PortalDocs.htm#aanchor172||Élaborer des formulaires de portail - connexions|SmartGuide/PortalFormDevConnections.htm#aanchor428||Intégration de documents du portail au GPSC|PortalDocIntegGCPM.htm#aanchor13||Intégration du portail avec GPSC|Portal-GCPMIntegration.htm#aanchor405||Inviter un client SC sur le portail|UsingPortal/InviteClient.htm#aanchor186||Les formulaires dynamiques du portail|SmartGuide/PortalFormDynamic.htm#aanchor60||Métadonnées FPGC|#aanchor166||Naviguer dans le portail|UsingPortal/NavigatePortal.htm#aanchor1||Notes de la version 1.0 du portail|PortalReleaseNotes1.0.htm#aanchor16||Personnalisation du portail|PortalBranding.htm#aanchor162||Portail - aperçu de la page maître|PortalMasterPage.htm#aanchor410||Sécurité du portail|PortalSecurity.htm#aanchor91||Serveur proxy inverse pou le portail|PortalReverseProxy.htm#aanchor394||Service de Windows : création de site|WindowsSiteCreation.htm#aanchor388||Service Web des ADR|WebServiceRDA.htm#aanchor97||Service Web FormManager|WebServiceFormMgr.htm#aanchor366||Service Web SharePoint|WebserviceSharePoint.htm#aanchor154||Service Web WebAPI|WebServiceWebAPI.htm#aanchor437||Services Web pour l'intégration de portails|WebServicesPortal.htm#aanchor420||SharePoint - structure du site du portail|PortalSharepointSiteStructure.htm#aanchor229||Solution GC.GCCF de  Visual Studio|VSSolutionGCCF.htm#aanchor295||Solution Visual Studio pour le EGCS.Portal|VSSolutionEGCSPortal.htm#aanchor88||Soumettre des données en tableaux avec un formulaire|UsingPortal/SubmitFormTable.htm#aanchor179||Soumettre des formulaires sur le portail|UsingPortal/SubmitForms.htm#aanchor215||Structure du&#160;Smartlet du GPSC|SmartGuide/PortalFormSmartletStructure.htm#aanchor385||Transfert de données du portail au &#160;GPSC|DataTransfer.htm#aanchor429"><span class="MCHelpControl-ConceptHotSpot_"><img class="MCHelpControl_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Concept Link Icon" />Voir aussi</span></a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>