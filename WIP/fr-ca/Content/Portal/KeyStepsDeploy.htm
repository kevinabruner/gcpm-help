<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="fr-ca" lang="fr-ca" class="_Skins_HTML5___Top_Navigation_Coronado" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Coin développer|[%=System.LinkedTitle%]|Déploiement">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Principales étapes à suivre pour déployer le portail</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.select-language-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/select-language.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.remove-highlight-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/highlight.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/sanitize-html.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../A_Welcome pages/StartHere.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search our help and documentation" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>Tous les fichiers</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Chercher">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="search-container">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                                <input class="search-field needs-pie" type="search" placeholder="Chercher" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>Tous les fichiers</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Chercher">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="row collapse">
                                        <div class="top-bar">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie select-language-button" title="Changer de langue">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="select language" />
                                                    </button>
                                                    <button class="button needs-pie print-button" title="Imprimer">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                    </button>
                                                    <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                    </button>
                                                    <button class="button needs-pie next-topic-button" title="Navigate next">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                    </button>
                                                    <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                                        <img src="../../Skins/Default/Stylesheets/Images/transparent.gif" alt="remove highlight" />
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">Vous êtes ici : </span>
                                                </div>
                                            </div> </div>
                                        <div class="topic-layout">
                                            <div>
                                                <div class="side-menu">
                                                    <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/Release_2_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                                <div class="side-content">
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadside-content"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Fermé" data-mc-alt2="Ouvert" />Conseils de recherche</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>La recherche est basée sur un mot clé.</p>
                                                            <p><samp>Par exemple, procédures</samp>
                                                            </p>
                                                            <p>Ne cherchez pas avec le langage naturel</p>
                                                            <p><samp>Par exemple, &lt; Comment puis-je écrire une nouvelle procédure? &gt;</samp>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div><a class="cta" href="https://technet.microsoft.com/en-us/library/mt812330.aspx"><div class="cta center"><p>Dynamics 365 Help</p></div></a>
                                            </div>
                                            <div>
                                                <h1>Principales étapes à suivre pour déployer le portail</h1>
                                                <p>Le déploiement et l'installation partent du principe que des versions de la solution <code>GC.GCCF</code> solution and <code>EGCS.Portal</code> solution are available in a directory <code>_Build</code>. Les fichiers de configuration personnalisés qui sont mentionnés ci-dessous doivent aussi se trouver dans ce répertoire.</p>
                                                <p>Des scripts d'installation doivent être exécutés dans une fenêtre PowerShell Dans la batterie SharePoint, les commandes doivent être exécutées dans une commande Management&#160;Shell de SharePoint en tant qu'administrateur (PowerShell avec le module SharePoint de chargé).</p>
                                                <h2>Prédéploiement</h2>
                                                <p>Ces étapes doivent être franchies avant de déployer le portail&#160;:</p>
                                                <ol>
                                                    <li value="1">
                                                        <p>Concevoir une topologie pour le portail. <br />Consultez <a href="PortalReverseProxy.htm" class="MCXref xref">Serveur proxy inverse pou le portail</a>.</p>
                                                    </li>
                                                    <li value="2">Planifiez les règles du proxy inverse pour qu'elles correspondent à votre topologie.</li>
                                                    <li value="3">Consultez le groupe de la gestion des justificatifs externes&#160;(GJE) de Services partagés Canada&#160; (SPC) à propos du processus d'intégration d'un nouveau portail de la fédération des justificatifs du gouvernement du Canada (FJGC).</li>
                                                    <li value="4">Choisissez les noms DNS du portail, des services ADFS&#160;(Active Directory Federation&#160;Services) de la FJGC et de l'application Web des domaines communs de la FJGC. Assurez-vous que ces noms sont enregistrés publiquement.</li>
                                                    <li value="5">Assurez-vous que les règles du pare-feu ont été mises à jour de manière à acheminer le trafic entrant vers le serveur du proxy inverse.</li>
                                                    <li value="6">Obteniez le(s) certificat(s) SSL pour les noms DNS publics. <br />Consultez <a href="Cert-SSL.htm" class="MCXref xref">Certificat de SSL</a>.</li>
                                                    <li value="7">Obtenez ou créez des certificats pour le service Web d'agence de développement régional (ADR) et le service Web de portail. <br />Consultez <a href="Cert-RDAWebService.htm" class="MCXref xref">Certificats de service Web d'agences régionales de développement (ADR)&#160;et de service Web de portail</a>.</li>
                                                    <li value="8">Obtenez des certificats de gestion des justificatifs internes (GJI) pour ADFS par l'entremise de SPC. <br />Consultez <a href="Cert-GCCF.htm" class="MCXref xref">Certificats de la FJGC</a>.</li>
                                                    <li value="9">Générez un fichier de métadonnées pour le portail. <br />Consulter <a href="GCCFMetadata.htm" class="MCXref xref">Métadonnées FPGC</a>&#160;:</li>
                                                    <li value="10">Créez des fichiers de configuration pour le portail. Les étapes d'installation ultérieures dépendent des fichiers de configuration qui se trouvent dans les solutions EGCS.Portal et GC.GCCF. L'installation n'est pas possible à moins que ce travail de configuration soit terminé.<br />Consulter <a href="GCCFConfig.htm" class="MCXref xref">Configuration de GC.GCCF</a> et <a href="EGCSPortalConfig.htm" class="MCXref xref">Configuration du portail de la Solution d'entreprise pour les subventions et les contributions&#160;(SESC)</a>. En travaillant dans ces fichiers d'installation, vous pourrez plus facilement déterminer si vous comprenez réellement votre portail. Suggestion : clônez les fichiers de configuration du portail d'intégration et travaillez avec ces fichiers.<ul><li value="1"><b>GC.GCCF project</b>: Edit <code>config.xml</code>, create <code>&lt;environment&gt;.config.xml</code>, create <code>&lt;environment&gt;.gccf.config</code></li><li value="2"><b>EGCS.Portal project</b>: Create <code>&lt;environment&gt;.egcs.config</code>.</li></ul></li>
                                                </ol>
                                                <h2>Déploiement</h2>
                                                <ol>
                                                    <li value="1">Configurez les règles sur le serveur du proxy inverse.<br /></li>
                                                    <li value="2">Installez SmartGuide.<br />Consultez <a href="SmartGuide/AlphinatDoc.htm" class="MCXref xref">Documentation de SmartGuide d'Alphinat</a>.<br />After completing the installation, ensure that write and modify permissions are granted to the <code>&lt;domain&gt;\IIS_IUSRS</code> group on the server side theme folder, to allow theme modifications:&#160;<ol style="list-style-type: lower-alpha;"><li value="1">Navigate to the installation of SmartGuide Application:&#160;<code>%SystemDrive%\inetpub\wwwroot\smartguide\x.x.x\smartlets\aspx</code></li><li value="2">Right click <b>main</b> folder, properties security.</li><li value="3">Check <b>Modify</b> and <b>Write</b>.<br /><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../Resources/Images/Portal/Permissions.png"><img class="MCPopupThumbnail img" data-mc-width="1137" data-mc-height="613" src="../Resources/Images/Portal/Permissions_thumb_0_48.png" tabindex="" /></a></li><li value="4"><p>An additional configuration needs to be made in order to support a client using multiple Smartlets per session. </p><p>In <code>%SystemDrive%\inetpub\wwwroot\smartguide\x.x.x\smartlets\web.config</code>, uncomment the following line:</p><p><code>&lt;add key="com.alphinat.sgs.MultipleSmartletsEnabled" value="true"/&gt;</code></p><p>Navigate to your Theme’s <code>default.aspx</code> file (either through the Themes tab on SmartGuide Designer or directly on the server <code>&lt;theme&gt;\default\default.aspx</code> and ensure the following two blocks of code are added:</p><p>At the top of the file:</p><p><code>&lt;%@ Import Namespace="com.alphinat.sg5" %&gt;</code></p><p>If not already there, place this code directly below the form declaration line (search for ‘&lt;form’)</p><p><code>&lt;apn:API5 runat="server" id="sg5"/&gt;</code></p><p><code>&lt;input type="hidden" name="com.alphinat.sgs.smartletcode" value="&lt;%</code></p><p> <code>ISmartlet rootSmartlet = sg5.Smartlet;</code></p><p><code>while(rootSmartlet.getParentSubSmartletField()!=null){</code></p><p><code>ISmartletField field =</code></p><p><code>(ISmartletField)rootSmartlet.getParentSubSmartletField();</code></p><p><code>rootSmartlet = field.getSmartlet();</code></p><p><code>}</code></p><p><code>Response.Write(rootSmartlet.getCode());</code></p><p><code>%&gt;"/&gt;</code></p></li></ol></li>
                                                    <li value="3">
                                                        <p>Modifiez le fichier HOSTS&#160;sur le serveur qui héberge SmartGuide. Ajoutez une entrée afin de résoudre le nom DNS du portail jusqu'à un serveur SharePoint (l'adresse IP interne du serveur SharePoint, sans passer par le proxy inverse).<br /></p>
                                                        <p>Modifiez &#160;: C<code>:\Windows\System32\drivers\etc\hosts</code></p>
                                                        <p>Add line: <code>&lt;IP Address&gt; &lt;Portal DNS Name&gt;</code></p>
                                                        <p>Par exemple, <code>192.168.1.1 sp-portal.egcs-sesc.ca</code></p>
                                                    </li>
                                                    <li value="4">Installez la base de données de la FJGC.<br />Consulter <a href="GCCFDatabase.htm" class="MCXref xref">Base de données de la fédération des justificatifs du gouvernement du Canada (FJGC)</a>.<br /></li>
                                                    <li value="5">Configurez la source du journal des événements de la FJGC. Cela permettra aux composantes de la FJGC d'écrire des événements dans le journal des événements des applications de&#160; Windows. Suivez l'étape ci-après sur le serveur ADFS, le serveur SmartGuide d'Alphinat et tous les serveurs SharePoint.<br />Exécutez le fichier du registre&#160;: <br /><code>regedt32.exe .\_Build\Config\EGCS-SESC\Registry\gccf.EventLog.reg</code></li>
                                                    <li value="6">ADFS&#160;Server - Install Entrust.<br /><code>Unzip _Build\Utility\Entrust 9.3\ESP_93_win64_install.zip</code> into a folder<p>For a development install, copy content of <code>_Build\Utility\Entrust 9.3\CATE</code> into new Entrust folder.  For a production install, copy the contents of <code>_Build\Utility\Entrust 9.3\Prod</code> into new Entrust folder. Overwrite <code>setup.ini</code> in all cases.</p><p>Run <code>setup.exe</code>, choose custom install.</p></li>
                                                    <li value="7">Serveur ADFS – Chargez le certificat SSL dans le magasin de certificats de la machine locale. <br /><code>$password =  Get-Credential -UserName "Enter password for cert" -Message "Enter Password for cert"</code><br /><code>Import-PfxCertificate -Exportable -Password $password.Password -CertStoreLocation Cert:\LocalMachine\My -FilePath .\&lt;ssl cert&gt;.pfx</code></li>
                                                    <li value="8">Serveur ADFS – Chargez les certificats de la FJGC dans le magasin de certificats de la machine locale.<br /><code>$password = Get-Credential -UserName "Enter password for cert" -Message "Enter Password for cert"</code><br /><code>Import-PfxCertificate -Exportable -Password $password.Password -CertStoreLocation Cert:\LocalMachine\My -FilePath .\&lt;GCCF encryption cert&gt;.p12</code><br /><code>Import-PfxCertificate -Exportable -Password $password.Password -CertStoreLocation Cert:\LocalMachine\My -FilePath .\ &lt;GCCF signing cert&gt;.p12</code></li>
                                                    <li value="9">Exportez le certificat de signature de la FJGC afin de l'utiliser avec SharePoint. Copiez le fichier de certificat dans le serveur SharePoint. <br /><code>.\_Build\Scripts\Export-GccfSigningCertificate.ps1 -SigningCertificateFile .\&lt;certificate name&gt;.sig.cer</code></li>
                                                    <li value="10">Serveur ADFS&#160;– Copiez les permissions pour les clés privées de certificat. Cela garantit que le compte de service &#160;ADFS peut accéder aux clés privées des certificats SSL et de la FJGC.<br /><code>.\_Build\Scripts\Configure-AdfsCertificatePermissions.ps1</code><br /></li>
                                                    <li value="11">Serveur ADFS – Installez &#160;ADFS. <b>Cette étape doit être suivie par un administrateur de domaine</b>. Il ne suffit pas d'avoir des droits administratifs sur le serveur ADFS.<code><br />Install-WindowsFeature Adfs-Federation –IncludeManagementTools</code><br /><code>.\_Build\Scripts\Install-Adfs.ps1</code><br /><code>&lt;Reboot server&gt;</code></li>
                                                    <li value="12">Serveur ADFS – Les étapes restantes peuvent être <b>suivies en tant qu'administrateur de serveur</b>. <br />Réglez les propriétés ADFS pour qu'elles correspondent aux exigences de la FJGC. Ajoutez un proxy inverse &#160;(le portail). Ajoutez des fournisseurs de justificatifs (FJ) pour la CléGC et SecureKey.<br /><code>.\_Build\Scripts\Configure-Adfs.ps1</code><br /><code>.\_Build\Scripts\Configure-AdfsRp.ps1</code><br /><code>.\_Build\Scripts\Configure-AdfsCp.ps1 -ClaimsProvider GCKey</code><br /><code>.\_Build\Scripts\Configure-AdfsCp.ps1 -ClaimsProvider SecureKey</code><br />Note that <code>Configure-AdfsCp.ps1</code> will report an warning message from ADFS when loading GCKey or SecureKey metadata. This message is expected, and can be ignored. Example: "WARNING: PS0031: Some portions of the metadata document were ignored.<br />MSIS7524: A 'SamlSingleLogoutService' endpoint was ignored because its binding <br />'<code>urn:oasis:names:tc:SAML:2.0:bindings:SOAP</code>' is not supported."</li>
                                                    <li value="13">
                                                        <p>Serveur ADFS – Installez le magasin d'attributs personnalisé d'ADFS.<br /><code>.\_Build\Scripts\Install-GccfAttributeStore.ps1</code></p>
                                                    </li>
                                                    <li value="14">Serveur ADFS&#160;– Installez l'application Web des extensions&#160; ADFS.<br />Consulter <a href="ADFSExtensionswebApp.htm" class="MCXref xref">Application Web des extensions des services ADFS (Active Directory Federation Services)</a>.<br /></li>
                                                    <li value="15">Serveur&#160; ADFS – Installez l'application Web des domaines communs de la FJGC.<br />Consulter <a href="GCCFCommonDomainWebApp.htm" class="MCXref xref">Application&#160;Web de domaine commun de la fédération des justificatifs du gouvernement du &#160;Canada (FJGC)</a>.<br /></li>
                                                    <li value="16">Générez la batterie SharePoint<br />La conception et l'installation d'une batterie SharePoint sont la responsabilité du ministère.<br />Consultez <a href="Sharepoint installation.htm" class="MCXref xref">Installation de Sharepoint</a> pour les étapes d'installation du portail d'intégration à titre de référence.</li>
                                                    <li value="17">Assurez-vous que la batterie SharePoint a une collection de sites racine. Accordez l'accès en «&#160;lecture&#160;» à la revendication Tout le monde c:0(.s|true<br />Disable minimal download for the root site collection<p><code>$web = Get-SPWeb https://&lt;portal&gt;</code></p><p><code>$web.EnableMinimalDownload = $false</code></p><p><code>$web.Update()</code></p><p>Grant all users access to the root site collection</p><p><code>$web = Get-SPWeb https://&lt;portal&gt;</code></p><p><code>$ra = New-Object Microsoft.SharePoint.SPRoleAssignment("c:0(.s|true", "", "", "")</code></p><p><code>$ra.RoleDefinitionBindings.Add($web.RoleDefinitions["Read"])</code></p><p><code>$web.RoleAssignments.Add($ra)</code></p><p><code>$web.Update()</code></p></li>
                                                    <li value="18">Asssurez-vous que la batterie SharePoint a une collecte de sites de centre de bienvenue (/sites/welcome-bienvenue). Accordez l'accès en «&#160;lecture&#160;» à la revendication Tout le monde c:0(.s|true<br />Désactivez le téléchargement minimum pour la collecte de sites de bienvenue<p><code>$web = Get-SPWeb https://&lt;portal&gt;/welcome-bienvenue</code><br /><code>$web.EnableMinimalDownload = $false</code></p><p><code>$web.Update()</code></p><p>Grant all users access to the welcome site collection</p><p><code>$web = Get-SPWeb https://&lt;portal&gt;/welcome-bienvenue</code></p><p><code>$ra = New-Object Microsoft.SharePoint.SPRoleAssignment("c:0(.s|true", "", "", "")</code></p><p><code>$ra.RoleDefinitionBindings.Add($web.RoleDefinitions["Read"])</code></p><p><code>$web.RoleAssignments.Add($ra)</code></p><p><code>$web.Update()</code></p></li>
                                                    <li value="19">Assurez-vous que le service de gestion des applications de SharePoint est fourni. Assurez-vous qu'un catalogue d'applications est fourni par l'administration centrale (/sites/AppCatalog).<br />Consultez <a href="SPFxAppsBuildDeploy.htm" class="MCXref xref">Bâtir et déployer des applications SharePoint Framework (SPFx)</a>. <br /></li>
                                                    <li value="20">Testez les règles du proxy inverse. Vérifiez si les requêtes Web peuvent rejoindre&#160;:<ul><li value="1">SharePoint</li><li value="2">SmartGuide</li><li value="3">ADFS</li><li value="4">Extensions ADFS</li><li value="5">Domaine commun de la FJGC<br /></li></ul></li>
                                                    <li value="21">Installez le service Web de portail sur un serveur SharePoint.<br />Consulter <a href="WebServicePortal.htm" class="MCXref xref">Service Web de portail</a>.<br /></li>
                                                    <li value="22">Chargez le certificat d'autorité de certification (AC) de la GJI dans SharePoint en tant que certificat racine de confiance.<br />Exécutez sur un serveur WFE de SharePoint.<p><code>.\_Build\Scripts\Import-IcmRootCertificateSharePoint.ps1</code><br /></p></li>
                                                    <li value="23">Configurez un émetteur de jetons de confiance de SharePoint pour qu'il corresponde à la partie de confiance configurée dans ADFS.<br /><p><code>.\_Build\Scripts\Configure-SharePointTrustedTokenIssuer.ps1 -CertificateFile .\&lt;certificate name&gt;.sig.cer</code></p></li>
                                                    <li value="24">Installez es solutions SharePoint dans la batterie&#160;SharePoint.<br />Exécutez sur un serveur WFE de SharePoint.<p><code>.\_Build\Scripts\Install-GCCF_Connector.ps1</code></p><p><code>.\_Build\Scripts\Install-GCCF_Web_Pages.ps1</code><br /></p><p><code>.\_Build\Scripts\Install-EGCS.Portal.SharePoint.Library.ps1</code><br /></p><p><code>.\_Build\Scripts\Install-EGCS.Portal.WebService.SharePoint.ps1</code><br /></p><p><code>.\_Build\Scripts\Install-EGCS.Portal.SharePoint.PortalMasterPage.ps1</code><br /></p></li>
                                                    <li value="25">Configurez l'application Web SharePoint<ul><li value="1">Utilisez le nouvel émetteur de jetons de confiance</li><li value="2">Autorisez l'accès anonyme pour l'application Web et la collecte de sites racine</li><li value="3">Désactivez l'intégration du client</li><li value="4">Configurez SharePoint pour les cookies de session<br /><p><code>.\_Build\Scripts\Configure-SharePointWebApplication.ps1</code></p></li></ul></li>
                                                    <li value="26">Installer <code>EGCS.Portal</code> and <code>GC.GCCF</code> configuration files on the SharePoint farm.<br />Run on any SharePoint WFE.<p><code>.\_Build\Scripts\Install-Egcs_Config.ps1 .\_Build\Config\&lt;portal name&gt;.egcs.config</code></p><p><code>.\_Build\Scripts\Install-GCCF_Config.ps1</code></p></li>
                                                    <li value="27">
                                                        <p>Installez le cache en mémoire. Cette étape doit être suivie sur tous les serveurs de sites Web frontaux (WFE) de SharePoint.<br />Installez les éléments binaires du cache en mémoire.<br /><code>mkdir "C:\Program Files (x86)\memcached"</code></p>
                                                        <p><code>copy .\_Build\Utility\memcached.exe "C:\Program Files (x86)\memcached\"</code>
                                                        </p>
                                                        <p><code>copy .\_Build\Utility\msvcr71.dll "C:\Program Files (x86)\memcached\"</code>
                                                        </p>
                                                        <p><code>cd "C:\Program Files (x86)\memcached"</code>
                                                        </p>
                                                        <p><code>.\memcached.exe -d install</code>
                                                        </p>
                                                        <p>Configurez le cache en mémoire.<br /><code>cd &lt;location of _Build folder&gt;</code></p>
                                                        <p><code>regedt32.exe "_Build\Utility\memcached.reg"</code>
                                                        </p>
                                                        <p><code>net start "memcached server"</code>
                                                        </p>
                                                    </li>
                                                    <li value="28">
                                                        <p>Importez un certificat qui est enregistré auprès du service Web d'ADR&#160;afin de permettre au portail d'effectuer des appels par rapport au service Web d'ADR. L'empreinte de ce certificat doit être configurée dans le service Web d'ADR <code>web.config</code> in section “<code>RDAWebServiceClientThumbprint</code>&#160;».</p>
                                                        <p><code>$password = Get-Credential -UserName "Enter password for cert" -Message "Enter Password for cert"</code>
                                                        </p>
                                                        <p><code>Import-PfxCertificate -Exportable -Password $password.Password -CertStoreLocation Cert:\LocalMachine\My -FilePath .\&lt;RDA client certificate&gt;.p12</code>
                                                        </p>
                                                        <p>Ou</p>
                                                        <p><code>certutil.exe -importpfx .\&lt;RDA client certificate&gt;.p12</code>
                                                        </p>
                                                        <p>Remarque : Pendant les essais, la commande de certificat <code> Import-PFX</code> n'a pas correctement importé les certificats créés avec OpenSSL. Les certificats ont été importés, mais la propriété 'PrivateKey' était nulle, ce qui rendait les certificats inutiles.</p>
                                                        <p>Quelle que soit la façon dont le certificat et importé, mettez à jour les permissions de la clé privée pour accorder l'accès au compte de service de portail de SharePoint.</p>
                                                        <p><code>$cert = Get-Item cert:\\LocalMachine\My\&lt;RDA client certificate thumbprint&gt;</code>
                                                        </p>
                                                        <p><code>$privateKeyContainer = $cert.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName</code>
                                                        </p>
                                                        <p><code>$keyPath = "C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\$privateKeyContainer"</code>
                                                        </p>
                                                        <p><code>$acl = Get-Acl -Path $keyPath</code>
                                                        </p>
                                                        <p><code>$permission = "&lt;domain&gt;\&lt;portal service account&gt;","Read","Allow"</code>
                                                        </p>
                                                        <p><code>$accessRule = new-object System.Security.AccessControl.FileSystemAccessRule $permission</code>
                                                        </p>
                                                        <p><code>$acl.AddAccessRule($accessRule)</code>
                                                        </p>
                                                        <p><code>Set-Acl $keyPath $acl</code>
                                                        </p>
                                                    </li>
                                                    <li value="29">Si tout s'est bien passé, vous pourrez alors ouvrir une session dans la batterie SharePoint en utilisant la CléGC ou&#160;SecureKey. Dans la réalité, un certain débogage sera requis. Si de l'information de configuration était inexacte, SharePoint ou&#160; ADFS peut être incapable d'authentifier avec un serveur de la FJGC.<br /></li>
                                                    <li value="30">Générez des applications du cadre de SharePoint (SPFx). Installez-les dans le catalogue d'applications. <br />Consultez <a href="SPFxAppsBuildDeploy.htm" class="MCXref xref">Bâtir et déployer des applications SharePoint Framework (SPFx)</a><br />&#160;:Consultez <a href="SPFxAppsPortal.htm" class="MCXref xref">Applications SPFx pour le portail</a>.<ul><li value="1"><code>spfx-portal-user.sppkg</code></li><li value="2"><code>spfx-message-centre.sppkg</code></li><li value="3"><code>spfx-factor-auth.sppkg</code></li><li value="4"><p style="list-style-type: disc;"><code style="list-style-type: disc;">spfx-terms.sppkg</code></p></li><li value="5"><code>egcs-portal-share-point-spfx-project.sppkg</code><br /></li></ul></li>
                                                    <li value="31">Créez un document de bibliothèque cdn pour stocker JavaScript pour les applications SPFx <br /><code>$web = Get-SPWeb https://&lt;portal&gt;</code><p><code>$web.Lists.Add("cdn", "cdn", [Microsoft.Sharepoint.SPListTemplateType]::DocumentLibrary)</code></p></li>
                                                    <li value="32">Retirez 'json' de la liste des types de fichiers bloqués. <br /><code>$wa = Get-SPWebApplication https://&lt;portal&gt;</code><p><code>$wa.BlockedFileExtensions.Remove("json")</code></p><p><code>$wa.Update()</code></p></li>
                                                    <li value="33">
                                                        <p>Créez des pages de portail pour héberger les parties Web pour l'authentification à deux&#160;facteurs, les conditions, le profil d'utilisateur et l'acceptation d'invitation. Ces pages doivent correspondre aux noms de page configurés dans <code>gccf.config</code>.</p>
                                                        <p><code>.\_Build\Scripts\Add-WebPartPage-SingleZone.ps1 -Url https://&lt;portal&gt; -Page 2FA.aspx</code>
                                                        </p>
                                                        <p><code>.\_Build\Scripts\Add-WebPartPage-SingleZone.ps1 -Url https://&lt;portal&gt; -Page ManageAccount-GererCompte.aspx</code>
                                                        </p>
                                                        <p><code>.\_Build\Scripts\Add-WebPartPage-SingleZone.ps1 -Url https://&lt;portal&gt; -Page Conditions.aspx</code>
                                                        </p>
                                                        <p><code>.\_Build\Scripts\Add-WebPartPage-SingleZone.ps1 -Url https://&lt;portal&gt;/welcome-bienvenue -Page ManageAccount-GererCompte.aspx</code>
                                                        </p>
                                                        <p><code>.\_Build\Scripts\Add-WebPartPage-SingleZone.ps1 -Url https://&lt;portal&gt;/welcome-bienvenue -Page Register-Enregistrer.aspx</code>
                                                        </p>
                                                    </li>
                                                    <li value="34">
                                                        <p>Déployez les applications SPFx manuellement dans les collections de sites, en utilisant l'interface utilisateur Web</p>
                                                        <p>Collecte de sites racine (<code>https://&lt;portal&gt;/</code>) – ajouter des applications&#160;:</p>
                                                        <p><code>spfx-terms-solution</code>
                                                        </p>
                                                        <p><code>spfx-portal-user-solution</code>
                                                        </p>
                                                        <p><code>egcs-portal-share-point-spfx-factor-auth-client</code>
                                                        </p>
                                                        <p>Collecte de sites de centre de bienvenue (<code>https://&lt;portal&gt;/welcome-bienvenue</code>) – ajouter une application&#160;:</p>
                                                        <p><code>spfx-portal-user-solution</code>
                                                        </p>
                                                    </li>
                                                    <li value="35">
                                                        <p>Déployez manuellement les parties &#160;Web sur les pages cibles, en utilisant l'interface utilisateur Web<br /><code>https://&lt;portal&gt;\2FA.aspx -&gt; TwoFactorAuth</code></p>
                                                        <p><code>https://&lt;portal&gt;\ManageAccount-GererCompte.aspx -&gt; UserProfileInfo</code>
                                                        </p>
                                                        <p><code>https://&lt;portal&gt;\Conditions.aspx -&gt; TermsAndConditions</code>
                                                        </p>
                                                        <p><code>https://&lt;portal&gt;/Welcome-Bienvenue/manageaccount-gerercompte.aspx -&gt; UserProfileInfo</code>
                                                        </p>
                                                        <p><code>https://&lt;portal&gt;/Welcome-Bienvenue/Register-Enregistrer.aspx -&gt; Invitation Accept</code>
                                                        </p>
                                                    </li>
                                                    <li value="36">Cachez le contrôle &#160;Chrome de la partie Web. <br /><code>.\_Build\Scripts\Disable-WebPartChrome.ps1 https://&lt;portal&gt;/2FA.aspx</code><p><code>.\_Build\Scripts\Disable-WebPartChrome.ps1 https://&lt;portal&gt;/ManageAccount-GererCompte.aspx</code></p><p><code>.\_Build\Scripts\Disable-WebPartChrome.ps1 https://&lt;portal&gt;/Conditions.aspx</code></p><p><code>.\_Build\Scripts\Disable-WebPartChrome.ps1 https://&lt;portal&gt;/Welcome-Bienvenue/manageaccount-gerercompte.aspx</code></p><p><code>.\_Build\Scripts\Disable-WebPartChrome.ps1 https://&lt;portal&gt;/Welcome-Bienvenue/Register-Enregistrer.aspx</code></p></li>
                                                    <li value="37">Installez le service de gestion des documents de Windows.<br />Voir <a href="WindowsDocMgt.htm" class="MCXref xref">Windows service - document management.</a></li>
                                                    <li value="38">Installez le service de création de sites de Windows.<br />Consulter <a href="WindowsSiteCreation.htm" class="MCXref xref">Service de Windows : création de site</a>.<br /></li>
                                                    <li value="39">Installez le service Web d'ADR.<br />Voir <a href="WebServiceRDA.htm" class="MCXref xref">Service Web des ADR</a><br /></li>
                                                    <li value="40">Installez le service Web WebAPI. <br />Consulter <a href="WebServiceWebAPI.htm" class="MCXref xref">Service Web WebAPI</a>.</li>
                                                </ol>
                                                <p><a class="MCHelpControl MCHelpControl-Concept conceptLink" data-mc-concepts="Portal" href="javascript:void(0);" data-mc-topics="À propos de la FJGC|GCCFAbout.htm#aanchor308||À propos du portail|AboutPortal.htm#aanchor146||À propos du portail|AboutPortal.htm#aanchor147||Aperçu du service Web FormManager|WebServicePortalFormMgr.htm#aanchor75||Application Web des extensions des services ADFS (Active Directory Federation Services)|ADFSExtensionswebApp.htm#aanchor268||Application&#160;Web de domaine commun de la fédération des justificatifs du gouvernement du &#160;Canada (FJGC)|GCCFCommonDomainWebApp.htm#aanchor0||Applications SPFx pour le portail|SPFxAppsPortal.htm#aanchor102||Authentification du GPSC|GCPMAuthentication.htm#aanchor274||Authentification pour les utilisateurs de la fédération des justificatifs du gouvernement du Canada (FJGC)|GCCFAuthentication.htm#aanchor203||Authentification pour les utilisateurs des agences de développement régional (ADR)|AuthenticationRDA.htm#aanchor386||Base de données de la fédération des justificatifs du gouvernement du Canada (FJGC)|GCCFDatabase.htm#aanchor402||Bâtir et déployer des applications SharePoint Framework (SPFx)|SPFxAppsBuildDeploy.htm#aanchor161||Certificat de SSL|Cert-SSL.htm#aanchor247||Certificats de la FJGC|Cert-GCCF.htm#aanchor12||Certificats de service Web d'agences régionales de développement (ADR)&#160;et de service Web de portail|Cert-RDAWebService.htm#aanchor267||Conception de formulaires pour le portail avec SmartGuide|SmartGuide/PortalFormDev.htm#aanchor418||Configuration de GC.GCCF|GCCFConfig.htm#aanchor87||Configuration du portail – courriel d'invitation|PortalConfigInviteEmail.htm#aanchor133||Configuration du portail de la Solution d'entreprise pour les subventions et les contributions&#160;(SESC)|EGCSPortalConfig.htm#aanchor164||Configurer des formulaires pour le portail|SmartGuide/ConfigureApplic on portal.htm#aanchor30||Créer de nouveaux formulaires|SmartGuide/CreateNewForms.htm#aanchor108||Déploiement de formulaires pour le portail avec SmartGuide|SmartGuide/PortalFormDeploy.htm#aanchor69||Développement de composants WebPart SPFx|SPFxAppsProjectFolders.htm#aanchor56||Diagramme de relation d'entité de portail|../Modules/ERDs/ERD Portal.htm#aanchor290||Documentation de SmartGuide d'Alphinat|SmartGuide/AlphinatDoc.htm#aanchor114||Documents dans le portail|PortalDocs.htm#aanchor172||Élaborer des formulaires de portail - connexions|SmartGuide/PortalFormDevConnections.htm#aanchor428||Intégration de documents du portail au GPSC|PortalDocIntegGCPM.htm#aanchor13||Intégration du portail avec GPSC|Portal-GCPMIntegration.htm#aanchor405||Inviter un client SC sur le portail|UsingPortal/InviteClient.htm#aanchor186||Les formulaires dynamiques du portail|SmartGuide/PortalFormDynamic.htm#aanchor60||Métadonnées FPGC|GCCFMetadata.htm#aanchor166||Naviguer dans le portail|UsingPortal/NavigatePortal.htm#aanchor1||Notes de la version 1.0 du portail|PortalReleaseNotes1.0.htm#aanchor16||Personnalisation du portail|PortalBranding.htm#aanchor162||Portail - aperçu de la page maître|PortalMasterPage.htm#aanchor410||Sécurité du portail|PortalSecurity.htm#aanchor91||Serveur proxy inverse pou le portail|PortalReverseProxy.htm#aanchor394||Service de Windows : création de site|WindowsSiteCreation.htm#aanchor388||Service Web des ADR|WebServiceRDA.htm#aanchor97||Service Web FormManager|WebServiceFormMgr.htm#aanchor366||Service Web SharePoint|WebserviceSharePoint.htm#aanchor154||Service Web WebAPI|WebServiceWebAPI.htm#aanchor437||Services Web pour l'intégration de portails|WebServicesPortal.htm#aanchor420||SharePoint - structure du site du portail|PortalSharepointSiteStructure.htm#aanchor229||Solution GC.GCCF de  Visual Studio|VSSolutionGCCF.htm#aanchor295||Solution Visual Studio pour le EGCS.Portal|VSSolutionEGCSPortal.htm#aanchor88||Soumettre des données en tableaux avec un formulaire|UsingPortal/SubmitFormTable.htm#aanchor179||Soumettre des formulaires sur le portail|UsingPortal/SubmitForms.htm#aanchor215||Structure du&#160;Smartlet du GPSC|SmartGuide/PortalFormSmartletStructure.htm#aanchor385||Transfert de données du portail au &#160;GPSC|DataTransfer.htm#aanchor429"><span class="MCHelpControl-ConceptHotSpot_"><img class="MCHelpControl_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Concept Link Icon" />Voir aussi</span></a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>